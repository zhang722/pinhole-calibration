<!DOCTYPE html>
<html class="js" lang="en-US"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<link rel="pingback" href="http://justinblaber.org/xmlrpc.php">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Camera Calibration Theory - justinblaber.org</title>
<meta name="robots" content="max-image-preview:large">

<!-- This site is optimized with the Yoast SEO plugin v11.3 - https://yoast.com/wordpress/plugins/seo/ -->
<link rel="canonical" href="http://justinblaber.org/camera-calibration-theory/">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Camera Calibration Theory - justinblaber.org">
<meta property="og:description" content="Single Camera Model We assume the camera adheres to the “pin-hole” model, where points in space project as straight lines to the camera aperture (the origin of the “scene” coordinate system) and intersect through an image plane at “image points”. This image plane is supposed to represent the ideal physical location of the image sensor, … Continue reading &quot;Camera Calibration Theory&quot;">
<meta property="og:url" content="http://justinblaber.org/camera-calibration-theory/">
<meta property="og:site_name" content="justinblaber.org">
<meta property="article:section" content="Computer Vision">
<meta property="article:published_time" content="2018-06-03T22:18:11+00:00">
<meta property="article:modified_time" content="2019-06-14T15:26:49+00:00">
<meta property="og:updated_time" content="2019-06-14T15:26:49+00:00">
<meta property="og:image" content="https://i.imgur.com/qp5fn1e.png">
<meta property="og:image:secure_url" content="https://i.imgur.com/qp5fn1e.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:description" content="Single Camera Model We assume the camera adheres to the “pin-hole” model, where points in space project as straight lines to the camera aperture (the origin of the “scene” coordinate system) and intersect through an image plane at “image points”. This image plane is supposed to represent the ideal physical location of the image sensor, … Continue reading &quot;Camera Calibration Theory&quot;">
<meta name="twitter:title" content="Camera Calibration Theory - justinblaber.org">
<meta name="twitter:image" content="https://i.imgur.com/qp5fn1e.png">
<script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"http://justinblaber.org/#organization","name":"","url":"http://justinblaber.org/","sameAs":[]},{"@type":"WebSite","@id":"http://justinblaber.org/#website","url":"http://justinblaber.org/","name":"justinblaber.org","publisher":{"@id":"http://justinblaber.org/#organization"},"potentialAction":{"@type":"SearchAction","target":"http://justinblaber.org/?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"WebPage","@id":"http://justinblaber.org/camera-calibration-theory/#webpage","url":"http://justinblaber.org/camera-calibration-theory/","inLanguage":"en-US","name":"Camera Calibration Theory - justinblaber.org","isPartOf":{"@id":"http://justinblaber.org/#website"},"image":{"@type":"ImageObject","@id":"http://justinblaber.org/camera-calibration-theory/#primaryimage","url":"https://i.imgur.com/qp5fn1e.png"},"primaryImageOfPage":{"@id":"http://justinblaber.org/camera-calibration-theory/#primaryimage"},"datePublished":"2018-06-03T22:18:11+00:00","dateModified":"2019-06-14T15:26:49+00:00"},{"@type":"Article","@id":"http://justinblaber.org/camera-calibration-theory/#article","isPartOf":{"@id":"http://justinblaber.org/camera-calibration-theory/#webpage"},"author":{"@id":"http://justinblaber.org/author/admin/#author"},"headline":"Camera Calibration Theory","datePublished":"2018-06-03T22:18:11+00:00","dateModified":"2019-06-14T15:26:49+00:00","commentCount":0,"mainEntityOfPage":"http://justinblaber.org/camera-calibration-theory/#webpage","publisher":{"@id":"http://justinblaber.org/#organization"},"articleSection":"Computer Vision"},{"@type":["Person"],"@id":"http://justinblaber.org/author/admin/#author","name":"admin","image":{"@type":"ImageObject","@id":"http://justinblaber.org/#authorlogo","url":"http://1.gravatar.com/avatar/a4b96f057ac5e053a8b31163e0715653?s=96&d=mm&r=g","caption":"admin"},"sameAs":[]}]}</script>
<!-- / Yoast SEO plugin. -->

<link rel="dns-prefetch" href="http://fonts.googleapis.com/">
<link href="https://fonts.gstatic.com/" crossorigin="" rel="preconnect">
<link rel="alternate" type="application/rss+xml" title="justinblaber.org » Feed" href="http://justinblaber.org/feed/">
<link rel="alternate" type="application/rss+xml" title="justinblaber.org » Comments Feed" href="http://justinblaber.org/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="justinblaber.org » Camera Calibration Theory Comments Feed" href="http://justinblaber.org/camera-calibration-theory/feed/">
<script>
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/justinblaber.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.2"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){p.clearRect(0,0,i.width,i.height),p.fillText(e,0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(t,0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(p&&p.fillText)switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s("\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!s("\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!s("\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!s("\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c\udfff","\ud83e\udef1\ud83c\udffb\u200b\ud83e\udef2\ud83c\udfff")}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style>
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="wp-quicklatex-format-css" href="Camera-Calibration-Theory-justinblaber.org_files/quicklatex-format.css" media="all">
<link rel="stylesheet" id="wp-block-library-css" href="Camera-Calibration-Theory-justinblaber.org_files/style.min.css" media="all">
<style id="wp-block-library-theme-inline-css">
.wp-block-audio figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-audio figcaption{color:hsla(0,0%,100%,.65)}.wp-block-audio{margin:0 0 1em}.wp-block-code{border:1px solid #ccc;border-radius:4px;font-family:Menlo,Consolas,monaco,monospace;padding:.8em 1em}.wp-block-embed figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-embed figcaption{color:hsla(0,0%,100%,.65)}.wp-block-embed{margin:0 0 1em}.blocks-gallery-caption{color:#555;font-size:13px;text-align:center}.is-dark-theme .blocks-gallery-caption{color:hsla(0,0%,100%,.65)}.wp-block-image figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-image figcaption{color:hsla(0,0%,100%,.65)}.wp-block-image{margin:0 0 1em}.wp-block-pullquote{border-bottom:4px solid;border-top:4px solid;color:currentColor;margin-bottom:1.75em}.wp-block-pullquote cite,.wp-block-pullquote footer,.wp-block-pullquote__citation{color:currentColor;font-size:.8125em;font-style:normal;text-transform:uppercase}.wp-block-quote{border-left:.25em solid;margin:0 0 1.75em;padding-left:1em}.wp-block-quote cite,.wp-block-quote footer{color:currentColor;font-size:.8125em;font-style:normal;position:relative}.wp-block-quote.has-text-align-right{border-left:none;border-right:.25em solid;padding-left:0;padding-right:1em}.wp-block-quote.has-text-align-center{border:none;padding-left:0}.wp-block-quote.is-large,.wp-block-quote.is-style-large,.wp-block-quote.is-style-plain{border:none}.wp-block-search .wp-block-search__label{font-weight:700}.wp-block-search__button{border:1px solid #ccc;padding:.375em .625em}:where(.wp-block-group.has-background){padding:1.25em 2.375em}.wp-block-separator.has-css-opacity{opacity:.4}.wp-block-separator{border:none;border-bottom:2px solid;margin-left:auto;margin-right:auto}.wp-block-separator.has-alpha-channel-opacity{opacity:1}.wp-block-separator:not(.is-style-wide):not(.is-style-dots){width:100px}.wp-block-separator.has-background:not(.is-style-dots){border-bottom:none;height:1px}.wp-block-separator.has-background:not(.is-style-wide):not(.is-style-dots){height:2px}.wp-block-table{margin:0 0 1em}.wp-block-table td,.wp-block-table th{word-break:normal}.wp-block-table figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-table figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-video figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video{margin:0 0 1em}.wp-block-template-part.has-background{margin-bottom:0;margin-top:0;padding:1.25em 2.375em}
</style>
<link rel="stylesheet" id="classic-theme-styles-css" href="Camera-Calibration-Theory-justinblaber.org_files/classic-themes.min.css" media="all">
<style id="global-styles-inline-css">
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #fff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--color--dark-gray: #1a1a1a;--wp--preset--color--medium-gray: #686868;--wp--preset--color--light-gray: #e5e5e5;--wp--preset--color--blue-gray: #4d545c;--wp--preset--color--bright-blue: #007acc;--wp--preset--color--light-blue: #9adffd;--wp--preset--color--dark-brown: #402b30;--wp--preset--color--medium-brown: #774e24;--wp--preset--color--dark-red: #640c1f;--wp--preset--color--bright-red: #ff675f;--wp--preset--color--yellow: #ffef8e;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}
</style>
<link rel="stylesheet" id="twentysixteen-fonts-css" href="Camera-Calibration-Theory-justinblaber.org_files/css.css" media="all">
<link rel="stylesheet" id="genericons-css" href="Camera-Calibration-Theory-justinblaber.org_files/genericons.css" media="all">
<link rel="stylesheet" id="twentysixteen-style-css" href="Camera-Calibration-Theory-justinblaber.org_files/style.css" media="all">
<link rel="stylesheet" id="twentysixteen-block-style-css" href="Camera-Calibration-Theory-justinblaber.org_files/blocks.css" media="all">
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css' href='http://justinblaber.org/wp-content/themes/twentysixteen/css/ie.css?ver=20170530' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css' href='http://justinblaber.org/wp-content/themes/twentysixteen/css/ie8.css?ver=20170530' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css' href='http://justinblaber.org/wp-content/themes/twentysixteen/css/ie7.css?ver=20170530' media='all' />
<![endif]-->
<link rel="stylesheet" id="tablepress-default-css" href="Camera-Calibration-Theory-justinblaber.org_files/tablepress-combined.min.css" media="all">
<!--[if lt IE 9]>
<script src='http://justinblaber.org/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3' id='twentysixteen-html5-js'></script>
<![endif]-->
<script src="Camera-Calibration-Theory-justinblaber.org_files/jquery.min.js" id="jquery-core-js"></script>
<script src="Camera-Calibration-Theory-justinblaber.org_files/jquery-migrate.min.js" id="jquery-migrate-js"></script>
<script src="Camera-Calibration-Theory-justinblaber.org_files/wp-quicklatex-frontend.js" id="wp-quicklatex-frontend-js"></script>
<link rel="https://api.w.org/" href="http://justinblaber.org/wp-json/"><link rel="alternate" type="application/json" href="http://justinblaber.org/wp-json/wp/v2/posts/938"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://justinblaber.org/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://justinblaber.org/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 6.2">
<link rel="shortlink" href="http://justinblaber.org/?p=938">
<link rel="alternate" type="application/json+oembed" href="http://justinblaber.org/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fjustinblaber.org%2Fcamera-calibration-theory%2F">
<link rel="alternate" type="text/xml+oembed" href="http://justinblaber.org/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fjustinblaber.org%2Fcamera-calibration-theory%2F&amp;format=xml">
	        <style>
	            .ili-indent{padding-left:40px !important;overflow:hidden}	        </style>
	    <style>.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style><style type="text/css" id="syntaxhighlighteranchor"></style>
<style>
.vimvixen-console-frame {
  margin: 0;
  padding: 0;
  bottom: 0;
  left: 0;
  width: 100%;
  position: fixed;
  z-index: 2147483647;
  border: none !important;
  background-color: unset !important;
  pointer-events:none;
}

.vimvixen-hint {
  background-color: yellow;
  border: 1px solid gold;
  font-weight: bold;
  position: absolute;
  text-transform: uppercase;
  z-index: 2147483647;
  font-size: 12px;
  color: black;
}
</style></head><style type="text/css" id="custom-css-injector">.vimvixen-console-frame {
  color-scheme: light !important;
}</style>

<body class="post-template-default single single-post postid-938 single-format-standard wp-embed-responsive">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-dark-grayscale"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></feColorMatrix><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="table" tableValues="0 0.49803921568627"></feFuncR><feFuncG type="table" tableValues="0 0.49803921568627"></feFuncG><feFuncB type="table" tableValues="0 0.49803921568627"></feFuncB><feFuncA type="table" tableValues="1 1"></feFuncA></feComponentTransfer><feComposite in2="SourceGraphic" operator="in"></feComposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-grayscale"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></feColorMatrix><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="table" tableValues="0 1"></feFuncR><feFuncG type="table" tableValues="0 1"></feFuncG><feFuncB type="table" tableValues="0 1"></feFuncB><feFuncA type="table" tableValues="1 1"></feFuncA></feComponentTransfer><feComposite in2="SourceGraphic" operator="in"></feComposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-purple-yellow"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></feColorMatrix><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="table" tableValues="0.54901960784314 0.98823529411765"></feFuncR><feFuncG type="table" tableValues="0 1"></feFuncG><feFuncB type="table" tableValues="0.71764705882353 0.25490196078431"></feFuncB><feFuncA type="table" tableValues="1 1"></feFuncA></feComponentTransfer><feComposite in2="SourceGraphic" operator="in"></feComposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-blue-red"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></feColorMatrix><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="table" tableValues="0 1"></feFuncR><feFuncG type="table" tableValues="0 0.27843137254902"></feFuncG><feFuncB type="table" tableValues="0.5921568627451 0.27843137254902"></feFuncB><feFuncA type="table" tableValues="1 1"></feFuncA></feComponentTransfer><feComposite in2="SourceGraphic" operator="in"></feComposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-midnight"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></feColorMatrix><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="table" tableValues="0 0"></feFuncR><feFuncG type="table" tableValues="0 0.64705882352941"></feFuncG><feFuncB type="table" tableValues="0 1"></feFuncB><feFuncA type="table" tableValues="1 1"></feFuncA></feComponentTransfer><feComposite in2="SourceGraphic" operator="in"></feComposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-magenta-yellow"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></feColorMatrix><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="table" tableValues="0.78039215686275 1"></feFuncR><feFuncG type="table" tableValues="0 0.94901960784314"></feFuncG><feFuncB type="table" tableValues="0.35294117647059 0.47058823529412"></feFuncB><feFuncA type="table" tableValues="1 1"></feFuncA></feComponentTransfer><feComposite in2="SourceGraphic" operator="in"></feComposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-purple-green"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></feColorMatrix><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="table" tableValues="0.65098039215686 0.40392156862745"></feFuncR><feFuncG type="table" tableValues="0 1"></feFuncG><feFuncB type="table" tableValues="0.44705882352941 0.4"></feFuncB><feFuncA type="table" tableValues="1 1"></feFuncA></feComponentTransfer><feComposite in2="SourceGraphic" operator="in"></feComposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-blue-orange"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></feColorMatrix><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="table" tableValues="0.098039215686275 1"></feFuncR><feFuncG type="table" tableValues="0 0.66274509803922"></feFuncG><feFuncB type="table" tableValues="0.84705882352941 0.41960784313725"></feFuncB><feFuncA type="table" tableValues="1 1"></feFuncA></feComponentTransfer><feComposite in2="SourceGraphic" operator="in"></feComposite></filter></defs></svg><div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="http://justinblaber.org/" rel="home">justinblaber.org</a></p>
										</div><!-- .site-branding -->

									<button id="menu-toggle" class="menu-toggle">Menu</button>

					<div id="site-header-menu" class="site-header-menu">
													<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
								<div class="menu-top-menu-container"><ul id="menu-top-menu" class="primary-menu"><li id="menu-item-19" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-19"><a href="http://justinblaber.org/">Home</a></li>
<li id="menu-item-25" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-25"><a href="http://justinblaber.org/category/computer-vision/">Computer Vision</a></li>
<li id="menu-item-22" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-22"><a href="http://justinblaber.org/category/medical_image_processing/">Medical Image Processing</a></li>
<li id="menu-item-2697" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2697"><a href="http://justinblaber.org/category/other-stuff/">Other Stuff</a></li>
</ul></div>							</nav><!-- .main-navigation -->
						
											</div><!-- .site-header-menu -->
							</div><!-- .site-header-main -->

					</header><!-- .site-header -->

		<div id="content" class="site-content">

<div id="primary" class="content-area">
	<main id="main" class="site-main" role="main">
		
<article id="post-938" class="post-938 post type-post status-publish format-standard hentry category-computer-vision">
	<header class="entry-header">
		<h1 class="entry-title">Camera Calibration Theory</h1>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<h2>Single Camera Model</h2>
<p>We assume the camera adheres to the “pin-hole” model, where points in
 space project as straight lines to the camera aperture (the origin of 
the “scene” coordinate system) and intersect through an image plane at 
“image points”. This image plane is supposed to represent the ideal 
physical location of the image sensor, and contains a 2D projection of 
3D scene points.</p>
<p>The diagram below describes the model:</p>
<p style="text-align: center;"><img decoding="async" class="alignnone size-medium" src="Camera-Calibration-Theory-justinblaber.org_files/qp5fn1e.png" width="637" height="347"></p>
<p><span id="more-938"></span><br>
Where:</p>
<ul class="ili-indent">
<li>image point: (<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-dad27a9703483183e1afd245f5232b83_l3.png" class="ql-img-inline-formula " alt="x_i" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="15" height="11">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-761333a1d61654bd1cb5c7224b0d1994_l3.png" class="ql-img-inline-formula " alt="y_i" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="14" height="12">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-f5844370b6482674a233a3063f762555_l3.png" class="ql-img-inline-formula " alt="f" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="10" height="16">)</li>
<li>scene point: (<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-712253b4b06deb3a5fc3ef26786314e1_l3.png" class="ql-img-inline-formula " alt="x_s" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="16" height="11">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a09d04af445ad7fabd2e20a810e67e27_l3.png" class="ql-img-inline-formula " alt="y_s" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="15" height="12">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-64a0d1c762d0060de1479c4c42b538e1_l3.png" class="ql-img-inline-formula " alt="z_s" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="14" height="11">)</li>
</ul>
<p>We can compute image points from scene points via:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-de3a8b72589ab5ad16f901fa1d762e01_l3.png" class="ql-img-inline-formula " alt="x_i=f\frac{x_s}{z_s}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="67" height="21"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-f214b0c983dc9cd2dc821ea546ae5f1b_l3.png" class="ql-img-inline-formula " alt="y_i=f\frac{y_s}{z_s}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="64" height="22"></p>
<p>If you delay the division by <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-64a0d1c762d0060de1479c4c42b538e1_l3.png" class="ql-img-inline-formula " alt="z_s" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="14" height="11">, the equations become linear:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-36cfd9d3508b31dd87afbbf32db995c4_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}u \\v\\w\end{bmatrix} = \begin{bmatrix}f &amp; 0 &amp; 0\\0 &amp; f &amp; 0\\0 &amp; 0 &amp; 1\end{bmatrix}\begin{bmatrix}x_s \\y_s\\z_s\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="181" height="65"></p>
<p><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-dad27a9703483183e1afd245f5232b83_l3.png" class="ql-img-inline-formula " alt="x_i" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="15" height="11"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-761333a1d61654bd1cb5c7224b0d1994_l3.png" class="ql-img-inline-formula " alt="y_i" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="14" height="12"> can be recovered by:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-84135d10b3ffae8ef8d2f7d2d4f0c336_l3.png" class="ql-img-inline-formula " alt="x_i=\frac{u}{w}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="52" height="19"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-453e5a04e937cc26c4972b3f635e0b35_l3.png" class="ql-img-inline-formula " alt="y_i=\frac{v}{w}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="51" height="19"></p>
<h4>Transformation from IMAGE POINTS to pixels COORDINATES</h4>
<p>We assume there is a simple offset and scaling relationship between <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-53b5a0405193f2106708b35b5aeed269_l3.png" class="ql-img-inline-formula " alt="(x_i, y_i)" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="50" height="18"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-2d27a9514ae59862d1d9a7d1a6209a1d_l3.png" class="ql-img-inline-formula " alt="(x_{pix}, y_{pix})" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="79" height="20">.</p>
<p>The diagram below describes this transformation:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" class="alignnone size-medium" src="Camera-Calibration-Theory-justinblaber.org_files/bxyIcXR.png" width="450" height="320"></p>
<p>Where:</p>
<ul class="ili-indent">
<li>image center: (<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-df814d39471ddbb03c3bdce361698231_l3.png" class="ql-img-inline-formula " alt="x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="17" height="11">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-29980656143dada55938c493f275370f_l3.png" class="ql-img-inline-formula " alt="y_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="16" height="12">)</li>
<li>scaling factors: <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c6a2a94b43cb51211cb3aa8f01334656_l3.png" class="ql-img-inline-formula " alt="k_x" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="17" height="16">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-960e9524e6e204ab3b28a4fa136e4a26_l3.png" class="ql-img-inline-formula " alt="k_y" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="16" height="19"></li>
</ul>
<p>The image center accounts for the fact that the image sensor might be
 shifted from the optical center, and the scaling factors account for 
the physical size of the pixels.</p>
<p>This leads to:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-df6424a6632b37ba8831388caacf6d6f_l3.png" class="ql-img-inline-formula " alt="x_{pix} = k_x x_i + x_o = k_x f \frac{x_s}{z_s} + x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="235" height="21"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c6922946ca603688a830ab59c361412f_l3.png" class="ql-img-inline-formula " alt="y_{pix} = k_y y_i + y_o = k_y f \frac{y_s}{z_s} + y_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="228" height="22"></p>
<p>Again, delaying the division of <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-64a0d1c762d0060de1479c4c42b538e1_l3.png" class="ql-img-inline-formula " alt="z_s" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="14" height="11"> results in a linear equation:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6beeee114cb90f76ed020a8789948965_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}u^{\prime} \\v^{\prime}\\w^{\prime}\end{bmatrix} = \begin{bmatrix}\alpha_x &amp; 0 &amp; x_o\\0 &amp; \alpha_y &amp; y_o\\0 &amp; 0 &amp; 1\end{bmatrix}\begin{bmatrix}x_s \\y_s\\z_s\end{bmatrix} = \begin{bmatrix}A\end{bmatrix} \begin{bmatrix}x_s \\y_s\\z_s\end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="308" height="65"></p>
<p>where:</p>
<ul class="ili-indent">
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-795e5174f8b1b94c157ad2893ae76439_l3.png" class="ql-img-inline-formula " alt="\alpha_x = f k_x " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="71" height="17"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-def7ecdf80b5e57faf4be9bd76cb9b84_l3.png" class="ql-img-inline-formula " alt="\alpha_y = f k_y " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="70" height="19"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-9f1399f9d211eb93908115f3b288c188_l3.png" class="ql-img-inline-formula " alt="x_{pix} = \frac{u^{\prime}}{w^{\prime}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="71" height="24"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-27d952c6ed2f65c724ffa7cd0e74452c_l3.png" class="ql-img-inline-formula " alt="y_{pix} = \frac{v^{\prime}}{w^{\prime}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="69" height="24"></li>
</ul>
<p>In an ideal world, the model would be complete and all we would need 
to do to characterize the camera “intrinsics” would be to find the <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e22cd473783b34d959c5bf89ebe7aa88_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}A\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="22" height="22">
 matrix. But, in the real world, there are distortions due to the camera
 sensor and lens. Some distortions include radial distortion introduced 
by lens manufacturing defects, the camera sensor not being completely 
orthogonal to the lens axis, etc, which are discussed in the next 
section.</p>
<h4>LENs/CAMERA Distortion MODEL</h4>
<p>Two popular lens/camera distortion models are heikkila97 and wang08. 
In my opinion, wang08 makes more sense intuitively than heikkila97, 
although the overall performance of the two is about the same. Since 
heikkila97 is used in many toolboxes (e.g Bouguet’s toolbox), I’ll 
discuss that here for the sake of example.</p>
<p>First, we must make a distinction between distorted and undistorted coordinates:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-1e264e86bd170e42e5ae4e810c29bc4d_l3.png" class="ql-img-inline-formula " alt="x_{pix}^{ideal} = k_x x_i + x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="136" height="23"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-d684b6aece6f382e260d9b6a63864697_l3.png" class="ql-img-inline-formula " alt="y_{pix}^{ideal} = k_y y_i + y_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="133" height="23"></p>
<p>and:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8c6240371226c1a732e74fc94da76867_l3.png" class="ql-img-inline-formula " alt="x_{pix}^{distorted} = k_x x_i^{distorted} + x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="212" height="23"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-52716d418e2fc644c500eb1281b0b0e7_l3.png" class="ql-img-inline-formula " alt="y_{pix}^{distorted} = k_y y_i^{distorted} + y_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="208" height="23"></p>
<p>We assume there are radial and tangential lens distortions:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-82d042e52dfa7f73ac185fc7703cdab1_l3.png" class="ql-img-inline-formula " alt="x_i^{distorted} = x_i + \delta x_i^{(r)} + \delta x_i^{(t)}" title="Rendered by QuickLaTeX.com" style="vertical-align: -5px;" width="218" height="25"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-36234e5bf9fda99f0eca19aadf207960_l3.png" class="ql-img-inline-formula " alt="y_i^{distorted} = y_i + \delta y_i^{(r)} + \delta y_i^{(t)}" title="Rendered by QuickLaTeX.com" style="vertical-align: -5px;" width="214" height="25"></p>
<p>Where:</p>
<ul class="ili-indent">
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a2161b19bab6fa8b253754001a9cbc03_l3.png" class="ql-img-inline-formula " alt="\delta x_i^{(r)} = x_i(k_1 r_i^{2} + k_2 r_i^{4})" title="Rendered by QuickLaTeX.com" style="vertical-align: -5px;" width="177" height="25"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-7a35ee504bdf3ae547f4ca53100d6fcc_l3.png" class="ql-img-inline-formula " alt="\delta y_i^{(r)} = y_i(k_1 r_i^{2} + k_2 r_i^{4})" title="Rendered by QuickLaTeX.com" style="vertical-align: -5px;" width="175" height="25"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b0952c4fefec2ef1bc790aa4ca91ee0a_l3.png" class="ql-img-inline-formula " alt="\delta x_i^{(t)} = 2 p_1 x_i y_i + p_2(r_i^{2} +2 x_i^{2})" title="Rendered by QuickLaTeX.com" style="vertical-align: -5px;" width="230" height="25"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-1b0a4c3ed51ba7175b3e3976aeb218ad_l3.png" class="ql-img-inline-formula " alt="\delta y_i^{(t)} = p_1(r_i^{2} +2 y_i^{2}) + 2 p_2 x_i y_i" title="Rendered by QuickLaTeX.com" style="vertical-align: -5px;" width="229" height="25"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-711c540c95412a1737cf505e14842594_l3.png" class="ql-img-inline-formula " alt=" r_i = \sqrt{x_i^{2} + y_i^{2}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="112" height="33"></li>
</ul>
<p>All together:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-1eab80b5123c1ad00c75fe825f220406_l3.png" class="ql-img-inline-formula " alt="x_{pix}^{distorted} = k_x (x_i + \delta x_i^{(r)} + \delta x_i^{(t)}) + x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="291" height="28"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8451bed0dff4417601f0cedbb1368da0_l3.png" class="ql-img-inline-formula " alt="y_{pix}^{distorted} = k_y (y_i + \delta y_i^{(r)} + \delta y_i^{(t)}) + y_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="285" height="28"></p>
<p>The following diagram describes this model:</p>
<p><img decoding="async" loading="lazy" class="alignnone size-medium" src="Camera-Calibration-Theory-justinblaber.org_files/jaRPDwT.png" width="637" height="347"></p>
<p>We now have most of the camera model addressed, but for camera 
calibration, a calibration pattern with known geometry is used. The 
geometry is described in coordinates relative to the calibration board, 
known as “world” coordinates and discussed in the next section.</p>
<h4>World Coordinates to pixel Coordinates</h4>
<p>First, the transformation from world to scene coordinates is a simple rigid body translation and rotation, shown below:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" class="alignnone size-medium" src="Camera-Calibration-Theory-justinblaber.org_files/oC5PZxh.png" width="528" height="456"></p>
<p>Where:</p>
<ul class="ili-indent">
<li style="list-style-type: none;">
<ul class="ili-indent">
<li>world point: (<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c457d5e6fd40316f31ce67a491193d4f_l3.png" class="ql-img-inline-formula " alt="X_w" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="25" height="15">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-49b146fcb1883a31d59f3ff30cc41c55_l3.png" class="ql-img-inline-formula " alt="Y_w" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="20" height="15">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-4bd3418ad252b3bff805fbb27cb1c6fe_l3.png" class="ql-img-inline-formula " alt="Z_w" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="21" height="15">)</li>
</ul>
</li>
</ul>
<p>This leads to:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-62bc847de6e983be3dd5d34362afc67e_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}x_s \\y_s\\z_s\end{bmatrix} = \begin{bmatrix} \begin{bmatrix} R \end{bmatrix} \vec{t} \end{bmatrix}\begin{bmatrix}X_w \\ Y_w \\Z_w \\ 1\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -39px;" width="160" height="86"></p>
<p>If we left-multiply both sides by <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e22cd473783b34d959c5bf89ebe7aa88_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}A\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="22" height="22">:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e4666589a7f418252d69b8b1e9588769_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}u^{\prime} \\v^{\prime}\\w^{\prime}\end{bmatrix} = \begin{bmatrix}\alpha_x &amp; 0 &amp; x_o\\0 &amp; \alpha_y &amp; y_o\\0 &amp; 0 &amp; 1\end{bmatrix} \begin{bmatrix} \begin{bmatrix} R \end{bmatrix} \vec{t} \end{bmatrix}\begin{bmatrix}X_w \\ Y_w \\Z_w \\ 1\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -39px;" width="276" height="86"></p>
<p>This is a linear equation which transforms world coordinates to pixel coordinates (recall: <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-9f1399f9d211eb93908115f3b288c188_l3.png" class="ql-img-inline-formula " alt="x_{pix} = \frac{u^{\prime}}{w^{\prime}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="71" height="24"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-27d952c6ed2f65c724ffa7cd0e74452c_l3.png" class="ql-img-inline-formula " alt="y_{pix} = \frac{v^{\prime}}{w^{\prime}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="69" height="24">).</p>
<p>Now, we have our entire model. In order to characterize the camera “intrinsics”, we need to compute <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e22cd473783b34d959c5bf89ebe7aa88_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}A\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="22" height="22"> and the distortion coefficients. The next section describes a numerical implementation to do this.</p>
<h2>Single Camera Calibration Numerical Implementation</h2>
<p>We now have a full camera model to work with. Some things:</p>
<ol class="ili-indent">
<li>Camera calibration involves using a calibration target with known world coordinates (<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c457d5e6fd40316f31ce67a491193d4f_l3.png" class="ql-img-inline-formula " alt="X_w" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="25" height="15">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-49b146fcb1883a31d59f3ff30cc41c55_l3.png" class="ql-img-inline-formula " alt="Y_w" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="20" height="15">, and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-4bd3418ad252b3bff805fbb27cb1c6fe_l3.png" class="ql-img-inline-formula " alt="Z_w" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="21" height="15">).
 We take pictures of this calibration target, find these known 
coordinates in pixel coordinates, and then find the “intrinsic” and 
“extrinsic” parameters, through linear and non-linear optimization, 
which make:
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-960648186ac3db6b77ae4f7e5c25fbdc_l3.png" class="ql-img-inline-formula " alt="x_{pix}^{measured} \approx x_{pix}^{distorted}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="160" height="23"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-04fdc9e68d05e5760c3d4bfea902ac86_l3.png" class="ql-img-inline-formula " alt="y_{pix}^{measured} \approx y_{pix}^{distorted}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="159" height="23"></p>
<p>i.e. we’re trying to make the model fit our measurements.</p></li>
<li>We re-parameterized things to be linear in the previous section so 
that linear optimization can be used. This is possible up until 
lens/camera distortion is involved. So, an initial guess can be made 
(usually assuming zero lens distortion, a reasonable assumption for most
 applications) with linear optimization, and then it is followed up with
 non-linear refinement with the full camera model.</li>
<li>For non-linear optimization, the rotation matrix needs to be 
re-parameterized so that it has 3 parameters. This is because the 
rotation matrix has 9 elements, but only 3 degrees of freedom. I use 
Euler angles here, but Rodriguez’s formula is also popular.</li>
<li>If the calibration target is flat, then <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a84a72f89a256310f6ce1863ca3c3da0_l3.png" class="ql-img-inline-formula " alt="Z_w=0" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="55" height="15"> and:
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-ae90df4bf7a3f5c4ab7ab00badeee9eb_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}u^{\prime} \\v^{\prime}\\w^{\prime}\end{bmatrix} = \begin{bmatrix} A \end{bmatrix} \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} &amp; \vec{t} \end{bmatrix}\begin{bmatrix}X_w \\ Y_w \\ 1\end{bmatrix} = \begin{bmatrix} H \end{bmatrix} \begin{bmatrix}X_w \\ Y_w \\ 1\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="330" height="65"></p>
<p><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-ef3f9eebaeffe083e17b30bee27aad0f_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} H \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="25" height="22">
 is known as a homography and acts as a projection operator for 
homogeneous coordinates. Often, it is found up to a scale factor.</p></li>
</ol>
<p>For this article, I’m assuming a 2D calibration board is used for 
calibration. The next sections explain how calibration (i.e. estimation 
of “intrinsic” and “extrinsic” parameters) is done for this case.</p>
<h4>Computing Homographies</h4>
<p>If we have two sets of points, for example a set of points on our 
calibration board in “world coordinates” and the corresponding set of 
points in pixel coordinates (i.e. we have detected and localized these 
points on the calibration board image), then we can approximate the 
transformation from these two sets of points using a homography. The 
assumption here is we’re using the pin-hole camera model and there is 
very little lens distortion.</p>
<p>Let:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-ffcb36a6cdde6b0815aa0ec217249c7d_l3.png" class="ql-img-inline-formula " alt="\vec{\tilde{m}} = \begin{bmatrix}u^{\prime} &amp; v^{\prime} &amp; w^{\prime}\end{bmatrix}^T" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="143" height="26"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6f3b04f2c6f2e42b43b430144b800ecf_l3.png" class="ql-img-inline-formula " alt="\vec{\tilde{M}} = \begin{bmatrix}X_w &amp; Y_w &amp; 1\end{bmatrix}^T" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="156" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-96a204df59107688b2a82f508727d994_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} H \end{bmatrix} = \begin{bmatrix} A \end{bmatrix} \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} &amp; \vec{t} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="165" height="23"></p>
<p>Then:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-11518a4416ef4361e8ba2433c516d503_l3.png" class="ql-img-inline-formula " alt="\vec{\tilde{m}} = \begin{bmatrix} H \end{bmatrix} \vec{\tilde{M}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="92" height="29"></p>
<p>Let:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c1291cbcb7b006a8019b4d5e04c8a52a_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} H \end{bmatrix}=\begin{bmatrix} \vec{\bar{h_1}}^T \\ \vec{\bar{h_2}}^T \\ \vec{\bar{h_3}}^T\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -34px;" width="91" height="78"></p>
<p>Then:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6be41bb351108094a5d8be19620de5f1_l3.png" class="ql-img-inline-formula " alt="u^{\prime} = \vec{\bar{h_1}}^T \vec{\tilde{M}}=\frac{u^{\prime}}{w^{\prime}}\vec{\bar{h_3}}^T \vec{\tilde{M}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="160" height="28"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5184752540be9a6cbee79032e9a7136d_l3.png" class="ql-img-inline-formula " alt="v^{\prime} = \vec{\bar{h_2}}^T \vec{\tilde{M}}=\frac{v^{\prime}}{w^{\prime}}\vec{\bar{h_3}}^T \vec{\tilde{M}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="160" height="28"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3a2410c553447322fa71774fbbba8700_l3.png" class="ql-img-inline-formula " alt="w^{\prime} = \vec{\bar{h_3}}^T \vec{\tilde{M}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -5px;" width="81" height="27"></p>
<p>We form homogeneous equations:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-7a6eb4097b36e6ebd64716490d11a247_l3.png" class="ql-img-inline-formula " alt="\vec{\bar{h_1}}^T \vec{\tilde{M}}-x_{pix}\vec{\bar{h_3}}^T \vec{\tilde{M}} = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="165" height="28"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a5473ab4e3acb8528017b14af75cd554_l3.png" class="ql-img-inline-formula " alt="\vec{\bar{h_2}}^T \vec{\tilde{M}}-y_{pix}\vec{\bar{h_3}}^T \vec{\tilde{M}} = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="163" height="28"></p>
<p>Then, we put them in matrix form:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-1e9cb241cbcca44926653cb31e77524b_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} \vec{\tilde{M}}^T &amp; \vec{0} &amp; -x_{pix} \vec{\tilde{M}}^T \\ \vec{0} &amp; \vec{\tilde{M}}^T &amp; -y_{pix} \vec{\tilde{M}}^T \end{bmatrix} \begin{bmatrix} \vec{\bar{h_1}} \\ \vec{\bar{h_2}} \\ \vec{\bar{h_3}} \end{bmatrix} = \begin{bmatrix} L \end{bmatrix} \vec{x} = \vec{0} " title="Rendered by QuickLaTeX.com" style="vertical-align: -34px;" width="325" height="78"></p>
<p>To solve:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b42df246fa37e2fbb3b41835e432cd51_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} L \end{bmatrix} \vec{x} = \vec{0} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="71" height="24"></p>
<p>The solution is the eigenvector of <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-95b9bcbac41429a63c49daf4f5e1da17_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} L \end{bmatrix}^T \begin{bmatrix} L \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="61" height="26"> associated with the smallest eigenvalue. To compute it, use the SVD:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8fd092aabca7de67c79240f172e445b1_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} L \end{bmatrix} = \begin{bmatrix} U \end{bmatrix} \begin{bmatrix} D \end{bmatrix} \begin{bmatrix} V \end{bmatrix}^T" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="151" height="26"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5566b056b5094debc74b11aac0aa9c63_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} L \end{bmatrix}^T \begin{bmatrix} L\end{bmatrix}=\begin{bmatrix}V \end{bmatrix}\begin{bmatrix}D \end{bmatrix}^T\begin{bmatrix}U \end{bmatrix}^T\begin{bmatrix}U \end{bmatrix}\begin{bmatrix}D \end{bmatrix}\begin{bmatrix}V \end{bmatrix}^T=\begin{bmatrix}V \end{bmatrix}\begin{bmatrix}D \end{bmatrix}^T\begin{bmatrix}D \end{bmatrix}\begin{bmatrix}V \end{bmatrix}^T" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="482" height="26"></p>
<p>Assuming the eigenvalues are sorted in descending order, then the last column of <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-55c3a59e4c5c4f63eac23a245b0479bf_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} V \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="23" height="22"> will contain the least eigenvector.</p>
<p>Note that since this is a homogeneous equation, once we solve for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-aee90824c3f4c140da7b40a5cc281ca6_l3.png" class="ql-img-inline-formula " alt="\vec{x}" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="12" height="13">, what we will actually find is <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-08db97aed3859f2c4a96ab922739696a_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} \hat{H} \end{bmatrix} = \lambda \begin{bmatrix} H \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="92" height="24">, i.e. a scaled version of <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-f71b21c3151797387b7f1a0a27b4d455_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} A \end{bmatrix} \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} &amp; \vec{t} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="110" height="23">. It’s important to keep this in mind.</p>
<p>Also, there is a normalized version of the above which makes it more stable and accounts for the fact that (<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-9f987d70b7e602811a84f76395dc4a0b_l3.png" class="ql-img-inline-formula " alt="x_{pix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="30" height="14">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-340742de4afadeb0072d14e4c4b98456_l3.png" class="ql-img-inline-formula " alt="y_{pix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="29" height="14">) and (<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c457d5e6fd40316f31ce67a491193d4f_l3.png" class="ql-img-inline-formula " alt="X_w" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="25" height="15">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-49b146fcb1883a31d59f3ff30cc41c55_l3.png" class="ql-img-inline-formula " alt="Y_w" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="20" height="15">) may have very different scales, which may make <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-27b79dcc52898748bb0cdd1a27ea07e6_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} L \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="20" height="22"> ill conditioned.</p>
<p>The normalization step does two things:</p>
<ol class="ili-indent">
<li>translates both sets of points so their centroids are at the origin</li>
<li>both sets of points are scaled so the average distance from the origin is equal to <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-917671677ea4a88f63f313d8bdf5a2e4_l3.png" class="ql-img-inline-formula " alt="\sqrt{2}" title="Rendered by QuickLaTeX.com" style="vertical-align: -2px;" width="23" height="18">, which I believe is done to ensure the x and y components are close to 1.</li>
</ol>
<p>A “normalization matrix” is used:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c92a47f0de0ac04ac40104be3651df60_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix}T_m\end{bmatrix} = \begin{bmatrix} s_m &amp; 0 &amp; \bar{-x_{pix}}s_m \\ 0 &amp; s_m &amp; -\bar{y_{pix}}s_m \\ 0 &amp; 0 &amp; 1 \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="218" height="65"></p>
<p>where:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0cef546bdafb1804978babe124d8fdc9_l3.png" class="ql-img-inline-formula " alt="\bar{x_{pix}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="30" height="17">= mean of <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-9f987d70b7e602811a84f76395dc4a0b_l3.png" class="ql-img-inline-formula " alt="x_{pix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="30" height="14"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-d826bed561be72967994112737d981b1_l3.png" class="ql-img-inline-formula " alt="\bar{y_{pix}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="29" height="17">= mean of <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-340742de4afadeb0072d14e4c4b98456_l3.png" class="ql-img-inline-formula " alt="y_{pix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="29" height="14"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e0a2275a97d8a06fce420b1e3f96729e_l3.png" class="ql-img-inline-formula " alt="s_m=\frac{\sqrt{2}N}{\sum_{i=1}^{N}\sqrt{(x_{pix_i} - \bar{x_{pix}})^2+(y_{pix_i} - \bar{y_{pix}})^2}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -15px;" width="279" height="34"></p>
<p>The same matrix is also constructed for the set of points in world coordinates, which we call <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3674399b2b10821a76e4d362a64d30ec_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} T_M \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="34" height="22"> .</p>
<p>Note:</p>
<ul class="ili-indent">
<li>Original homography: <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-11518a4416ef4361e8ba2433c516d503_l3.png" class="ql-img-inline-formula " alt="\vec{\tilde{m}} = \begin{bmatrix} H \end{bmatrix} \vec{\tilde{M}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="92" height="29"></li>
<li>Preconditioned homography: <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-ec2dc2b849b273c344a06b40b99269a5_l3.png" class="ql-img-inline-formula " alt="\vec{\tilde{m^{\prime}}} = \begin{bmatrix} H^{\prime} \end{bmatrix} \vec{\tilde{M^{\prime}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="105" height="30"></li>
</ul>
<p>where:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a426a92236ded934d6d17c588c7683b1_l3.png" class="ql-img-inline-formula " alt="\vec{\tilde{m^{\prime}}} = \begin{bmatrix}T_m\end{bmatrix}\vec{\tilde{m}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="100" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-d73956e7d4eba501c23ff4fdaef163eb_l3.png" class="ql-img-inline-formula " alt="\vec{\tilde{M^{\prime}}}= \begin{bmatrix}T_M\end{bmatrix}\vec{\tilde{M}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="110" height="30"></p>
<p>If we do the math to see the updated <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-ca8e3e347d3f3aa25bb6b8e9774481c2_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} L \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="20" height="22">:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a37c475f24d74d858c3de17f58de792a_l3.png" class="ql-img-inline-formula " alt="\begin{gathered} \begin{bmatrix} s_m &amp; 0 &amp; \bar{-x_{pix}}s_m \\ 0 &amp; s_m &amp; -\bar{y_{pix}}s_m \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix}u^{\prime} \\v^{\prime}\\w^{\prime}\end{bmatrix} = \begin{bmatrix}s_m u^{\prime}-\bar{x_{pix}}s_m w^{\prime} \\s_m v^{\prime}-\bar{y_{pix}}s_m w^{\prime} \\ w^{\prime} \end{bmatrix}=\begin{bmatrix}s_m (u^{\prime}-\bar{x_{pix}} w^{\prime}) \\s_m (v^{\prime}-\bar{y_{pix}} w^{\prime}) \\ w^{\prime} \end{bmatrix}=\vec{\tilde{m^{\prime}}} \end{gathered}" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="588" height="65"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-f8d8f37fd3ee8d61b806b6b237b4452e_l3.png" class="ql-img-inline-formula " alt="\begin{gathered} \begin{bmatrix} s_M &amp; 0 &amp; \bar{-X_w}s_M \\ 0 &amp; s_M &amp; -\bar{Y_w}s_M \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix}X_w \\ Y_w \\ 1 \end{bmatrix} = \begin{bmatrix}s_M X_w-\bar{X_w}s_M \\s_M Y_w-\bar{Y_w}s_M \\ 1 \end{bmatrix}=\begin{bmatrix}s_M (X_w-\bar{X_w}) \\s_M (Y_w-\bar{Y_w}) \\ 1 \end{bmatrix}=\vec{\tilde{M^{\prime}}} \end{gathered}" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="586" height="66"></p>
<p>Then:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-97eaa77960f563816aed005fb0e7667e_l3.png" class="ql-img-inline-formula " alt="s_m (u^{\prime}-\bar{x_{pix}} w^{\prime}) = \vec{\bar{h_1^{\prime}}}^T \vec{\tilde{M^{\prime}}}=\frac{s_m (u^{\prime}-\bar{x_{pix}} w^{\prime})}{w^{\prime}}\vec{\bar{h_3^{\prime}}}^T \vec{\tilde{M^{\prime}}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="367" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0279d803821e7de16c1acc7bacc334b9_l3.png" class="ql-img-inline-formula " alt="s_m (v^{\prime}-\bar{y_{pix}} w^{\prime}) = \vec{\bar{h_2^{\prime}}}^T \vec{\tilde{M^{\prime}}}=\frac{s_m (v^{\prime}-\bar{y_{pix}} w^{\prime}) }{w^{\prime}}\vec{\bar{h_3^{\prime}}}^T \vec{\tilde{M^{\prime}}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="363" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a2d71bf437dcf69f9eab44ed5e173e82_l3.png" class="ql-img-inline-formula " alt="w^{\prime} = \vec{\bar{h_3^{\prime}}}^T \vec{\tilde{M^{\prime}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -5px;" width="93" height="28"></p>
<p>We form homogeneous equations:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-466a733877392645d0cc393e66fba5f2_l3.png" class="ql-img-inline-formula " alt="\vec{\bar{h_1^{\prime}}}^T \vec{\tilde{M^{\prime}}}-s_m(x_{pix}-\bar{x_{pix}})\vec{\bar{h_3^{\prime}}}^T \vec{\tilde{M^{\prime}}} = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="276" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-bfb2596d3772d6c93ae29cccf65210e8_l3.png" class="ql-img-inline-formula " alt="\vec{\bar{h_2^{\prime}}}^T \vec{\tilde{M^{\prime}}}-s_m(y_{pix}-\bar{y_{pix}})\vec{\bar{h_3^{\prime}}}^T \vec{\tilde{M^{\prime}}} = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="273" height="29"></p>
<p>Then, we put them in matrix form:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-265c529f43388c77dcfc5d14a824e202_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} \vec{\tilde{M^{\prime}}}^T &amp; \vec{0} &amp; -s_m(x_{pix}-\bar{x_{pix}}) \vec{\tilde{M^{\prime}}}^T \\ \vec{0} &amp; \vec{\tilde{M^{\prime}}}^T &amp; -s_m(y_{pix}-\bar{y_{pix}}) \vec{\tilde{M^{\prime}}}^T \end{bmatrix} \begin{bmatrix} \vec{\bar{h_1^{\prime}}} \\ \vec{\bar{h_2^{\prime}}} \\ \vec{\bar{h_3^{\prime}}} \end{bmatrix} = \begin{bmatrix} L^{\prime} \end{bmatrix} \vec{x^{\prime}}= \vec{0} " title="Rendered by QuickLaTeX.com" style="vertical-align: -39px;" width="435" height="86"></p>
<p>We can now solve for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-f6bdf7ce167148480621b347965cebc5_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} \hat{H^{\prime}} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="29" height="24"> using <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-ef1043d9bda581a661965d5059c61967_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} L^{\prime} \end{bmatrix} \vec{x^{\prime}} = \vec{0} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="80" height="25">. But, we must recover the original homography after we have computed the preconditioned homography; to recover it:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-f55c812f81acbbd4a050ff65ebefd043_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}T_m\end{bmatrix}\vec{\tilde{m}}=\begin{bmatrix} {H}^{\prime}\end{bmatrix} \begin{bmatrix}T_M\end{bmatrix}\vec{\tilde{M}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="178" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8be5baaa4bd6b24f999e7660e88a2a78_l3.png" class="ql-img-inline-formula " alt="\vec{\tilde{m}}=\begin{bmatrix}T_m\end{bmatrix}^{-1}\begin{bmatrix} H^{\prime}\end{bmatrix} \begin{bmatrix}T_M\end{bmatrix}\vec{\tilde{M}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="200" height="29"></p>
<p>This means:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-957d4e6a1f97b86821901a84b6df5c02_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}H\end{bmatrix} = \begin{bmatrix}T_m\end{bmatrix}^{-1}\begin{bmatrix} H^{\prime}\end{bmatrix} \begin{bmatrix}T_M\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="187" height="26"></p>
<p>Which implies:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-fe17df96a24a95852b56639d3b007183_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}\hat{H}\end{bmatrix} = \begin{bmatrix}T_m\end{bmatrix}^{-1}\begin{bmatrix} \hat{H^{\prime}}\end{bmatrix} \begin{bmatrix}T_M\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="187" height="26"></p>
<p>So, to use the preconditioned approach:</p>
<ol class="ili-indent">
<li>Use <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-ef1043d9bda581a661965d5059c61967_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} L^{\prime} \end{bmatrix} \vec{x^{\prime}} = \vec{0} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="80" height="25"> and the SVD method to solve for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-f6bdf7ce167148480621b347965cebc5_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} \hat{H^{\prime}} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="29" height="24"></li>
<li>Recover <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b4737d091ac943ac70e41e478358512b_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}\hat{H}\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="25" height="24"> with <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-02877e427d239fa864cfc78ae85ded44_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}T_m\end{bmatrix}^{-1}\begin{bmatrix}\hat{ H^{\prime}}\end{bmatrix} \begin{bmatrix}T_M\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="132" height="26"></li>
</ol>
<p>So now we have a linear method for computing homographies. Another 
refinement you can do is a nonlinear optimization of the homography 
using the linear method as the initial guess. This is more or less 
optional but included for completeness.</p>
<p>The first step is to divide the initial linear homography guess by <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a6b8f45d34dd1abb523d314d1a561cd4_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}\hat{H}\end{bmatrix}_{3,3}" title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="46" height="28"> so that <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-96d87058c0368595dd8695d461039dde_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}\hat{H}\end{bmatrix}_{3,3}=1" title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="78" height="28">.
 Homographies have 8 degrees of freedom and this is a typical constraint
 added to parameterize the homography for nonlinear optimization.</p>
<p>Next, we derive the Jacobian so we can perform Gauss-Newton 
iterations (note the initial guess is typically very good and the 
optimization is well behaved, so in my experience more robust methods 
like Levenberg-Marquardt aren’t necessary).</p>
<p>We start with:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b48ab4386a6e136d1c921d54a0375228_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}u^{\prime} \\v^{\prime}\\w^{\prime}\end{bmatrix} = \begin{bmatrix} h_{11} &amp; h_{12} &amp; h_{13} \\ h_{21} &amp; h_{22} &amp; h_{23} \\ h_{31} &amp; h_{32} &amp; 1 \end{bmatrix} \begin{bmatrix}X_w \\ Y_w \\ 1\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="238" height="65"></p>
<p>Let:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-222fb073a4435e29c43343085f297df0_l3.png" class="ql-img-inline-formula " alt="x_{pix}^{ideal} = \frac{u^{\prime}}{w^{\prime}} = \frac{h_{11}X_w+h_{12}Y_w+h_{13}}{h_{31}X_w+h_{32}Y_w+1}" title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="231" height="27"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-4cff298d3f7a089dbd91dca9eae1b51c_l3.png" class="ql-img-inline-formula " alt="y_{pix}^{ideal} = \frac{v^{\prime}}{w^{\prime}} = \frac{h_{21}X_w+h_{22}Y_w+h_{23}}{h_{31}X_w+h_{32}Y_w+1}" title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="231" height="27"></p>
<p>Set the cost function to:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5cb4717bb27f03ccba33372c7ab42f5b_l3.png" class="ql-img-inline-formula " alt=" C_{LS}=\sum_{i=1}^{N}(x^i_p-x^m_p)^2+(y^i_p-y^m_p)^2 " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="284" height="24"></p>
<p style="text-align: left;">where i = ideal, m = measured, and p = pix.</p>
<p style="text-align: left;">To compute the Jacobian, we start off with the residuals:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-ad2dfb59d20dbd00cf9ef912b00e8c58_l3.png" class="ql-img-inline-formula " alt="res_x=x^i(\vec{h})-x^m" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="141" height="22"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-7c9aac98911bb08d99fd1ceed1e4bb3a_l3.png" class="ql-img-inline-formula " alt="res_y=y^i(\vec{h})-y^m" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="139" height="24"></p>
<p>Take the partial derivative:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-875792436ffc358791eb1f6fd1ea174b_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{res_x}}{\partial{\vec{h}}} = \frac{\partial{x^i}}{\partial{\vec{h}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -10px;" width="83" height="28"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-820a55d53dc42a26eed20f31396a08c5_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{res_y}}{\partial{\vec{h}}} = \frac{\partial{y^i}}{\partial{\vec{h}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -10px;" width="83" height="29"></p>
<p>The Jacobian has the form:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a47e8a3276d23dd0c670f84786c2c9fb_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix}J\end{bmatrix}_{ij} = \begin{bmatrix} \frac{\partial{res_i}}{\partial{\vec{h_j}}}\end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="109" height="32"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-cdb41f1022bdcf395a1fb35a9df0d4dd_l3.png" class="ql-img-inline-formula " alt="  \newcommand\overmat[2]{% \makebox[0pt][l]{$\smash{\color{white}\overbrace{\phantom{% \begin{matrix}#2 \end{matrix}}}^{\text{\color{black}#1}}}$}#2} \newcommand\bovermat[2]{% \makebox[0pt][l]{$\smash{\overbrace{\phantom{% \begin{matrix}#2\end{matrix}}}^{\text{#1}}}$}#2} \newcommand\coolrightbrace[2]{% \left.\vphantom{\begin{matrix} #1 \end{matrix}}\right\}#2}  \begin{bmatrix}J\end{bmatrix} = \begin{blockarray}{ccccccccc} &amp; \partial{h_{11}} &amp; \partial{h_{21}} &amp; \partial{h_{31}} &amp; \partial{h_{12}} &amp; \partial{h_{22}} &amp; \partial{h_{32}} &amp; \partial{h_{13}} &amp; \partial{h_{23}} \\ \begin{block}{c[cccccccc@{\hspace*{5pt}}]} \partial{res_{x}} &amp; $\frac{X_w}{w^{\prime}}$ &amp; 0 &amp; $\frac{-u^{\prime}X_w}{w^{\prime}^2}$ &amp; $\frac{Y_w}{w^{\prime}}$ &amp; 0 &amp; $\frac{-u^{\prime}Y_w}{w^{\prime}^2}$ &amp; $\frac{1}{w^{\prime}}$ &amp; 0 \\ \partial{res_{y}} &amp; 0 &amp; $\frac{X_w}{w^{\prime}}$ &amp; $\frac{-v^{\prime}X_w}{w^{\prime}^2}$ &amp; 0 &amp; $\frac{Y_w}{w^{\prime}}$ &amp; $\frac{-v^{\prime}Y_w}{w^{\prime}^2}$ &amp; 0 &amp; $\frac{1}{w^{\prime}}$ \\ \end{block} \end{blockarray} " title="Rendered by QuickLaTeX.com" style="vertical-align: -22px;" width="568" height="67"></p>
<p>Where:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-fb5e8f3fb6d0ac62c7747aedc5211d89_l3.png" class="ql-img-inline-formula " alt="  \newcommand\overmat[2]{% \makebox[0pt][l]{$\smash{\color{white}\overbrace{\phantom{% \begin{matrix}#2 \end{matrix}}}^{\text{\color{black}#1}}}$}#2} \newcommand\bovermat[2]{% \makebox[0pt][l]{$\smash{\overbrace{\phantom{% \begin{matrix}#2\end{matrix}}}^{\text{#1}}}$}#2} \newcommand\coolrightbrace[2]{% \left.\vphantom{\begin{matrix} #1 \end{matrix}}\right\}#2}  \begin{bmatrix}J\end{bmatrix} = \begin{bmatrix} \bovermat{8}{\frac{\partial{res_{x_1}}}{\partial{\vec{h}}}} \\ \vdots \\ \frac{\partial{res_{y_1}}}{\partial{\vec{h}}} \\ \vdots \\ \end{bmatrix}% \begin{matrix} \coolrightbrace{\frac{\partial{res_{x_1}}}{\partial{\vec{h}}} \\ \vdots \\ \frac{\partial{res_{y_1}}}{\partial{\vec{h}}} \\ \vdots}{2N} \\ \end{matrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -55px;" width="164" height="142"></p>
<p>And you can perform Gauss-Newton updates using the pseudo inverse (although you really should use a direct linear solver):</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-20729bf9ffd3cc3d280c422027e8bea3_l3.png" class="ql-img-inline-formula " alt=" \Delta\vec{h} = -\begin{bmatrix}J\end{bmatrix}^+\vec{res}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="131" height="26"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-fca30bd7dc5d2ffe5388b1d924951d13_l3.png" class="ql-img-inline-formula " alt="\vec{h_{new}} = \vec{h_{old}} + \Delta\vec{h}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="136" height="21"></p>
<p>Until some convergence condition.</p>
<p>Now, we have a method to determine a fully optimized homography given two sets of points.</p>
<h4>Initial guess of intrinsic parameters</h4>
<p>After homographies for each image of a calibration board are 
computed, we need to compute an initial guess for the intrinsic 
parameters.</p>
<p>We can only find an initial linear guess for the parameters in <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e22cd473783b34d959c5bf89ebe7aa88_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}A\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="22" height="22">: <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-df814d39471ddbb03c3bdce361698231_l3.png" class="ql-img-inline-formula " alt="x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="17" height="11">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b6f3df8f819b48e34efc5b3d613ba7f1_l3.png" class="ql-img-inline-formula " alt=" y_o " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="16" height="12">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-68bed16433d2c9e6de4f618eb1609fb2_l3.png" class="ql-img-inline-formula " alt="\alpha_x" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="19" height="11">, and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-9b3736f1c74e084b430941ae53b7893b_l3.png" class="ql-img-inline-formula " alt=" \alpha_y " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="18" height="14">. We assume that the lens distortion parameters are zero, which is reasonable for most camera/lens combinations.</p>
<p>Furthermore, we assume the following:</p>
<ul class="ili-indent">
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-29f453e53a0a7e116ded8278f12e1141_l3.png" class="ql-img-inline-formula " alt="x_o = \frac{image \textunderscore width+1}{2}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="140" height="23"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-2c70a1357a32e678ab4dccd16d08f118_l3.png" class="ql-img-inline-formula " alt="y_o = \frac{image \textunderscore height+1}{2}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="143" height="23"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-24cd83da4b15e30c5c263e7092877d02_l3.png" class="ql-img-inline-formula " alt="\alpha_x = \alpha_y" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="62" height="14"></li>
</ul>
<p>We assume the first two things because the principle point estimation
 is usually difficult and unstable, so we assume it’s at the middle of 
the image (this also assumes the first pixel has a position of (1,1); 
i.e. one-based indexing). It’s also a good assumption for most cameras 
that <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c6a2a94b43cb51211cb3aa8f01334656_l3.png" class="ql-img-inline-formula " alt="k_x" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="17" height="16">=<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-960e9524e6e204ab3b28a4fa136e4a26_l3.png" class="ql-img-inline-formula " alt="k_y" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="16" height="19"> (assuming the pixels are square) and hence <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-68bed16433d2c9e6de4f618eb1609fb2_l3.png" class="ql-img-inline-formula " alt="\alpha_x" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="19" height="11"> = <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5931c4fdb4d556033a6f362594cc0af4_l3.png" class="ql-img-inline-formula " alt="\alpha_y" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="18" height="14"> = <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5f44d9bbc8046069be4aa2989bff19aa_l3.png" class="ql-img-inline-formula " alt="\alpha" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="11" height="8">. These constraints will allow us to get a better initial guess for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5f44d9bbc8046069be4aa2989bff19aa_l3.png" class="ql-img-inline-formula " alt="\alpha" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="11" height="8">.</p>
<p>Let:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-42b4aa32eed988175c9a6cf831ae95f2_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}\bar{H}\end{bmatrix}=\begin{bmatrix}1 &amp; 0 &amp; -x_o \\ 0 &amp; 1 &amp; -y_o \\0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} \hat{H} \end{bmatrix} = \lambda \begin{bmatrix} \alpha &amp; 0 &amp; 0 \\ 0 &amp; \alpha &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} &amp; \vec{t} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="400" height="65"></p>
<p>Now, let:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0d90eba2e357b9af56ea074e3c7ccf8c_l3.png" class="ql-img-inline-formula " alt=" \vec{v_1} = \begin{bmatrix} \bar{H} \end{bmatrix} \begin{bmatrix} 1 \\ 0 \\ 0 \end{bmatrix} = \lambda \begin{bmatrix} \alpha &amp; 0 &amp; 0 \\ 0 &amp; \alpha &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} \end{bmatrix} \begin{bmatrix} 1 \\ 0 \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="322" height="65"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-bc3bfcc823b73d454232847506d4103b_l3.png" class="ql-img-inline-formula " alt=" \vec{v_2} = \begin{bmatrix} \bar{H} \end{bmatrix} \begin{bmatrix} 0 \\ 1 \\ 0 \end{bmatrix} = \lambda \begin{bmatrix} \alpha &amp; 0 &amp; 0 \\ 0 &amp; \alpha &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} \end{bmatrix} \begin{bmatrix} 0 \\ 1 \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="322" height="65"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-634c5d52596d91bb6e5ada3e6eca7a7a_l3.png" class="ql-img-inline-formula " alt=" \vec{v_3} = \begin{bmatrix} \bar{H} \end{bmatrix} \begin{bmatrix} 1 \\ 1 \\ 0 \end{bmatrix} = \lambda \begin{bmatrix} \alpha &amp; 0 &amp; 0 \\ 0 &amp; \alpha &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} \end{bmatrix} \begin{bmatrix} 1 \\ 1 \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="322" height="65"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c60eec0a8a483e3e7b92f80f5a15dc2b_l3.png" class="ql-img-inline-formula " alt=" \vec{v_4} = \begin{bmatrix} \bar{H} \end{bmatrix} \begin{bmatrix} 1 \\ -1 \\ 0 \end{bmatrix} = \lambda \begin{bmatrix} \alpha &amp; 0 &amp; 0 \\ 0 &amp; \alpha &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} \end{bmatrix} \begin{bmatrix} 1 \\ -1 \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="350" height="65"></p>
<p>Then:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e350a78fb23dbd3e876d3f2f39775446_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} 1 \\ 0 \end{bmatrix} = \frac{1}{\lambda} \begin{bmatrix} \vec{r_1}^T \\ \vec{r_2}^T \end{bmatrix} \begin{bmatrix} \frac{1}{\alpha} &amp; 0 &amp; 0 \\ 0 &amp; \frac{1}{\alpha} &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \vec{v_1}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="218" height="66"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-75f259a020282d3a428abbea2d1eb266_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} 0 \\ 1 \end{bmatrix} = \frac{1}{\lambda} \begin{bmatrix} \vec{r_1}^T \\ \vec{r_2}^T \end{bmatrix} \begin{bmatrix} \frac{1}{\alpha} &amp; 0 &amp; 0 \\ 0 &amp; \frac{1}{\alpha} &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \vec{v_2}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="219" height="66"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a8bc9b20b400c6ae27de886bf9ff2ee8_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} 1 \\ 1 \end{bmatrix} = \frac{1}{\lambda} \begin{bmatrix} \vec{r_1}^T \\ \vec{r_2}^T \end{bmatrix} \begin{bmatrix} \frac{1}{\alpha} &amp; 0 &amp; 0 \\ 0 &amp; \frac{1}{\alpha} &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \vec{v_3}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="219" height="66"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-fd61708ba82c53d521a5754b5d2e31eb_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} 1 \\ -1 \end{bmatrix} = \frac{1}{\lambda} \begin{bmatrix} \vec{r_1}^T \\ \vec{r_2}^T \end{bmatrix} \begin{bmatrix} \frac{1}{\alpha} &amp; 0 &amp; 0 \\ 0 &amp; \frac{1}{\alpha} &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \vec{v_4}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="233" height="66"></p>
<p>Then:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-cfe3501e5b7bc0e70d78adf69894dd60_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} 1 &amp; 0 \end{bmatrix} \begin{bmatrix} 0 \\ 1 \end{bmatrix} = \bigg( \frac{1}{\lambda} \vec{v_1}^T \begin{bmatrix} \frac{1}{\alpha} &amp; 0 &amp; 0 \\ 0 &amp; \frac{1}{\alpha} &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} \end{bmatrix}\bigg) \bigg(\frac{1}{\lambda} \begin{bmatrix} \vec{r_1}^T \\ \vec{r_2}^T \end{bmatrix} \begin{bmatrix} \frac{1}{\alpha} &amp; 0 &amp; 0 \\ 0 &amp; \frac{1}{\alpha} &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \vec{v_2} \bigg) = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="558" height="66"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c11dbc7a543453ec73aac0f6248db699_l3.png" class="ql-img-inline-formula " alt=" \vec{v_1}^T \begin{bmatrix} \frac{1}{\alpha^2} &amp; 0 &amp; 0 \\ 0 &amp; \frac{1}{\alpha^2} &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \vec{v_2} = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="186" height="66"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-4d5eb2925bfb87796b2f2494c9d43e14_l3.png" class="ql-img-inline-formula " alt=" \frac{1}{\alpha^2} v_{11} v_{21} + \frac{1}{\alpha^2} v_{12} v_{22} + v_{13} v_{23} = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="252" height="23"></p>
<p>We arrive at the following constraint:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e87b3155eb8cb43c97c5f712f4de1530_l3.png" class="ql-img-inline-formula " alt=" \frac{1}{\alpha^2} ( v_{11} v_{21} + v_{12} v_{22} ) = - v_{13} v_{23} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="229" height="23"></p>
<p>If you repeat the same steps for: <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-1c434ffb85576ca697375c3c0abc6d0b_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} 1 &amp; 1 \end{bmatrix} \begin{bmatrix} 1 \\ -1 \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -17px;" width="86" height="43">, you get the additional constraint:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a17ed65ded9808d4de680dc8e42e762a_l3.png" class="ql-img-inline-formula " alt=" \frac{1}{\alpha^2} ( v_{31} v_{41} + v_{32} v_{42} ) = - v_{33} v_{43} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="229" height="23"></p>
<p>We put these constraints into matrix form:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c2929e1c48199e4163bd1791c699dbe0_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} v_{11} v_{21} + v_{12} v_{22} \\ v_{31} v_{41} + v_{32} v_{42} \end{bmatrix} (\frac{1}{\alpha^2}) = \begin{bmatrix} -v_{13} v_{23} \\ -v_{33} v_{43} \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -17px;" width="263" height="43"></p>
<p>Let:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-126f6b42b717fe100446c8b1d881bd77_l3.png" class="ql-img-inline-formula " alt=" \vec{a} x = \vec{b} " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="53" height="18"></p>
<p>where:</p>
<ul class="ili-indent">
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-62f8624be05cbd5da3c79910be968131_l3.png" class="ql-img-inline-formula " alt=" \vec{a} = \begin{bmatrix} v_{11} v_{21} + v_{12} v_{22} \\ v_{31} v_{41} + v_{32} v_{42} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -17px;" width="162" height="43"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8c963603d4fb81f8da0db0ae0b3bfdd5_l3.png" class="ql-img-inline-formula " alt=" x = \frac{1}{\alpha^2}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="52" height="23"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c6361be00477bd0ead8881bf9880a5fc_l3.png" class="ql-img-inline-formula " alt=" \vec{b} = \begin{bmatrix} -v_{13} v_{23} \\ -v_{33} v_{43} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -17px;" width="106" height="43"></li>
</ul>
<p>Then, you can solve for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5312958f2d81f3750013c07544382777_l3.png" class="ql-img-inline-formula " alt=" x " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="8"> and take the inverse and square root to recover <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-7a617700f7aa362ca684c1fee8eee1b2_l3.png" class="ql-img-inline-formula " alt=" \alpha " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="11" height="8">.</p>
<p>Some things:</p>
<ul class="ili-indent">
<li>You can normalize <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-66ad3a54c7ce28334ce808e2410dc342_l3.png" class="ql-img-inline-formula " alt="\vec{v_1}" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="15" height="17">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a14c4a54fce956244eb314c90da3df75_l3.png" class="ql-img-inline-formula " alt="\vec{v_2}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="16" height="16">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b15b86b4eaa1b3cfa5f767d643e8a01a_l3.png" class="ql-img-inline-formula " alt="\vec{v_3}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="16" height="16">, and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-02c50de08c1ba8255423dbd905469823_l3.png" class="ql-img-inline-formula " alt="\vec{v_4}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="16" height="16"> by dividing each with their respective norm before solving for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5312958f2d81f3750013c07544382777_l3.png" class="ql-img-inline-formula " alt=" x " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="8">. This does not effect the orthogonality constraint and prevents issues in case one of the <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6ae701ddd0d4d7b5371379090afcc9ef_l3.png" class="ql-img-inline-formula " alt=" \vec{v} " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="11" height="13">‘s are very large.</li>
<li>You can solve for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5312958f2d81f3750013c07544382777_l3.png" class="ql-img-inline-formula " alt=" x " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="8"> using least squares. However, you can also solve the <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5312958f2d81f3750013c07544382777_l3.png" class="ql-img-inline-formula " alt=" x " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="8">&nbsp; that makes the projection of <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-725c1d750d0e194bd5f13a19539f1735_l3.png" class="ql-img-inline-formula " alt=" \vec{a} " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="11" height="13"> on <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b5fb81357991600b322921519b051e9f_l3.png" class="ql-img-inline-formula " alt=" \vec{b} " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="18"> equal to <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b5fb81357991600b322921519b051e9f_l3.png" class="ql-img-inline-formula " alt=" \vec{b} " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="18">:
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-1c96f2f608b10faa7daf656772885543_l3.png" class="ql-img-inline-formula " alt="x \frac{&lt;\vec{a}, \vec{b}&gt;}{\sqrt{&lt;\vec{b},\vec{b}&gt;}} = \sqrt{&lt;\vec{b},\vec{b}&gt;}" title="Rendered by QuickLaTeX.com" style="vertical-align: -15px;" width="168" height="39"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0bc95ad4407a4ce57a40b18958617136_l3.png" class="ql-img-inline-formula " alt="x = \frac{&lt;\vec{b},\vec{b}&gt;}{&lt;\vec{a},\vec{b}&gt;}" title="Rendered by QuickLaTeX.com" style="vertical-align: -12px;" width="75" height="33"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-046137de94f5e6e48f0f24703288a821_l3.png" class="ql-img-inline-formula " alt="\alpha = \sqrt{\frac{&lt;\vec{a},\vec{b}&gt;}{&lt;\vec{b},\vec{b}&gt;}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -16px;" width="96" height="43"></p>
<p>This is what Bouguet does in his Matlab toolbox and from my tests 
appears to work slightly better than the least squares results. I have a
 feeling it might be because you obtain a larger <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-7e5fbfa0bbbd9f3051cd156a0f1b5e31_l3.png" class="ql-img-inline-formula " alt="x" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="8"> when <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-79e1b67ae6932c46ba635685a3569c28_l3.png" class="ql-img-inline-formula " alt="\vec{a}" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="11" height="13"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b5fb81357991600b322921519b051e9f_l3.png" class="ql-img-inline-formula " alt=" \vec{b} " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="18"> are not collinear, which in turn results in a smaller <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5f44d9bbc8046069be4aa2989bff19aa_l3.png" class="ql-img-inline-formula " alt="\alpha" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="11" height="8"> and prevents over estimates, but beyond that I’m not really sure.</p></li>
</ul>
<h4>Initial guess of extrinsic parameters</h4>
<p>The next step is to get an initial guess of the extrinsic parameters per calibration board image.</p>
<p>Since we now have an initial guess for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-03dcac838c39a82351cf65936f9a9fe8_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} A \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="22" height="22">:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a01e4bfa78453fbb274cd5d31517e441_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} \hat{H} \end{bmatrix} = \begin{bmatrix} \vec{\hat{h_1}} &amp; \vec{\hat{h_2}} &amp; \vec{\hat{h_3}} \end{bmatrix}= \lambda \begin{bmatrix} A \end{bmatrix} \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} &amp; \vec{t} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="304" height="32"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-678ef16d4f89c7cbf9dfc76551b316eb_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} A \end{bmatrix}^{-1} \begin{bmatrix} \vec{\hat{h_1}} &amp; \vec{\hat{h_2}} &amp; \vec{\hat{h_3}} \end{bmatrix}= \lambda \begin{bmatrix} \vec{r_1} &amp; \vec{r_2} &amp; \vec{t} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="268" height="32"></p>
<p>This results in the following:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-d69a17116c8303fac94c1e503791fb88_l3.png" class="ql-img-inline-formula " alt="\vec{r_1} = \frac{1}{\lambda} \begin{bmatrix} A \end{bmatrix}^{-1} \vec{\hat{h_1}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="120" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e448b683ffd3038ae4eab9e6a1b930e0_l3.png" class="ql-img-inline-formula " alt="\vec{r_2} = \frac{1}{\lambda} \begin{bmatrix} A \end{bmatrix}^{-1} \vec{\hat{h_2}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="121" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6e56ccfb444c0675c6fba60f81593264_l3.png" class="ql-img-inline-formula " alt="\vec{t} = \frac{1}{\lambda} \begin{bmatrix} A \end{bmatrix}^{-1} \vec{\hat{h_3}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="111" height="29"></p>
<p>Since <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-335e403b4fd51e79a7fe59e0b2f4a199_l3.png" class="ql-img-inline-formula " alt=" \vec{r_1} " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="14" height="17"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-61cb6f857457aa327ea5cf68e971d5f0_l3.png" class="ql-img-inline-formula " alt=" \vec{r_2} " title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="15" height="16"> are supposed to be unit vectors:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0d6ad5bb73dbe7e160b68bee0ace35df_l3.png" class="ql-img-inline-formula " alt="\lambda_1 = \| \begin{bmatrix} A \end{bmatrix}^{-1} \vec{\hat{h_1}} \| " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="128" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-d63a06deb19d4aa73613ee563cd31ef4_l3.png" class="ql-img-inline-formula " alt="\lambda_2 = \| \begin{bmatrix} A \end{bmatrix}^{-1} \vec{\hat{h_2}} \| " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="128" height="29"></p>
<p>We can then solve for the extrinsics:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-4c26669027120b4054375e302d05eeb4_l3.png" class="ql-img-inline-formula " alt="\vec{r_1} = \frac{1}{\lambda_1} \begin{bmatrix} A \end{bmatrix}^{-1} \vec{\hat{h_1}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="126" height="31"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a632a3e0dbe0d6cd3b86018d6fc88f6e_l3.png" class="ql-img-inline-formula " alt="\vec{r_2} = \frac{1}{\lambda_2} \begin{bmatrix} A \end{bmatrix}^{-1} \vec{\hat{h_2}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="127" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0c5894b94b30691c71072170161fc00c_l3.png" class="ql-img-inline-formula " alt="\vec{r_3} = \vec{r_1} \times \vec{r_2}" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="92" height="17"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-87ffe675d176ab49759efd2c138eb830_l3.png" class="ql-img-inline-formula " alt="\vec{t} = \frac{1}{(\lambda_1+\lambda_2)/2} \begin{bmatrix} A \end{bmatrix}^{-1} \vec{\hat{h_3}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="168" height="31"></p>
<p>A few things:</p>
<ul class="ili-indent">
<li>The parameterization of the homography is only unique because we constrained <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a8198a0a4ae171475e5e15d23b10b753_l3.png" class="ql-img-inline-formula " alt=" \lambda " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="12"> to be positive. To see the effect this has, look at <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-42f6f9f0a6f33950a2d47df4d570bbce_l3.png" class="ql-img-inline-formula " alt="\vec{t}" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="11" height="16">; in particular <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-7ddf703f4c43def5d9f94a8e3239c4fc_l3.png" class="ql-img-inline-formula " alt="t_z" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="13" height="15">:
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6a27ad99a8ba96d792c432ac023d53d6_l3.png" class="ql-img-inline-formula " alt="t_z = \frac{\hat{h}_{3,3}}{\lambda}" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="65" height="29"></p>
<p><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-82ef24a537e50f7acd89325e9034104e_l3.png" class="ql-img-inline-formula " alt=" \hat{h}_{3,3} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="28" height="24"> is 1 (recall we set this constraint when we computed the homography). So, if <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8c37d2f1acb1d49f3e5e655797880475_l3.png" class="ql-img-inline-formula " alt="\lambda" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="12"> is constrained to be positive, the effect this has is to ensure <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3ed4a6cc7677c6982afd8878de29420b_l3.png" class="ql-img-inline-formula " alt=" t_z " title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="13" height="15"> is positive. This is correct, as the calibration board is in the positive z direction.</p></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-2d3a56054682ccef14a86699d88ee040_l3.png" class="ql-img-inline-formula " alt="{\lambda_1}" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="16" height="16"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-9ae0401bff47cfb212200dbfbae921d8_l3.png" class="ql-img-inline-formula " alt="{\lambda_2}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="17" height="15">
 should be equal, but will probably be slightly off due to some 
combination of model misfit, noise, etc… So we take the average of the 
two when computing <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e979ebabefec89543161a0302f9c1ce7_l3.png" class="ql-img-inline-formula " alt=" \vec{t} " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="11" height="16">.</li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8b03e9651999ddd9ccd6142697e611d6_l3.png" class="ql-img-inline-formula " alt="\vec{r_1}" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="14" height="17"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-7b6341222d9cd0bfe7a4b7f3749eb94c_l3.png" class="ql-img-inline-formula " alt="\vec{r_2}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="15" height="16"> should be orthogonal, but again, due to model misfit, noise, etc… will probably be slightly off. To make <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-fee89c9d3137405c5ad5b10af3024f2c_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} R \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="22" height="22"> an orthogonal matrix, we can compute the best orthogonal approximation:
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-523a982b76218ab4fa551c42fe8ed2f8_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} \vec{r_1} &amp; \vec{r_2} &amp; \vec{r_3} \end{bmatrix} = \begin{bmatrix} R \end{bmatrix} \approx \begin{bmatrix} \hat{R} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="192" height="24"></p>
<p>Take the SVD of <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-2828decef6bc818d186938424d65cfb3_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} R\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="22" height="22">:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e37ca034acf749904d0937c5d7b2c619_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} R \end{bmatrix} = \begin{bmatrix} U \end{bmatrix}\begin{bmatrix} D \end{bmatrix}\begin{bmatrix} V \end{bmatrix}^T" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="153" height="26"></p>
<p>Then:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-cf055ce4ba7e26ecfda5fa8d195b1bb8_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} \hat{R} \end{bmatrix} = \begin{bmatrix} U \end{bmatrix} \begin{bmatrix} V \end{bmatrix}^T" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="120" height="26"></p>
<p>Solves:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0f103c26f5482566ad5a48407e159c65_l3.png" class="ql-img-inline-formula " alt="_{\substack{min \\ \begin{bmatrix} \hat{R}\end{bmatrix}}} \| \begin{bmatrix} \hat{R} \end{bmatrix} - \begin{bmatrix} R \end{bmatrix} \|^2_F" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="140" height="45"> &nbsp; subject to &nbsp; <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e3a4518b59c12a4432688c073af4455f_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} \hat{R}\end{bmatrix}^T \begin{bmatrix} \hat{R}\end{bmatrix} = \begin{bmatrix}I\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="112" height="27"></p>
<p>I won’t give a proof, but it should be somewhat intuitive.</p></li>
<li>You can (optionally) do nonlinear refinement of just the extrinsics 
(on a per calibration board image basis) before optimizing all 
parameters, but this only requires modifying the global optimization 
problem slightly, which I’ll talk about next.</li>
</ul>
<h4>Nonlinear Refinement of All Parameters (Single Camera)</h4>
<p>Note that by now we have initial guesses for all intrinsic and 
extrinsic parameters. We can now define a cost function and optimize it 
across all intrinsic and extrinsic parameters.</p>
<p>But, before we do that, it makes things easier to parameterize the camera model with “normalized” coordinates.</p>
<p>Let:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-412275569087c4b0a1ec64f79af09a76_l3.png" class="ql-img-inline-formula " alt=" x_n = \frac{x_s}{z_s} " title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="60" height="21"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6dc10e21f924858ff4157f3fe7b55baa_l3.png" class="ql-img-inline-formula " alt=" y_n = \frac{y_s}{z_s} " title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="57" height="22"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-409b2c634602f515561680d326dd8f5b_l3.png" class="ql-img-inline-formula " alt=" r_n = \sqrt{x_n^2 + y_n^2} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="118" height="22"></p>
<p>Then:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3f1bd55934d004596eb83b12a0b4afee_l3.png" class="ql-img-inline-formula " alt=" x_i = f x_n" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="68" height="16"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b316d75bad32d31230898a484e381c9b_l3.png" class="ql-img-inline-formula " alt=" y_i = f y_n" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="65" height="16"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-ecd50e615a37bb8628bbd09d7ec1742d_l3.png" class="ql-img-inline-formula " alt=" r_i = \sqrt{f^2(x_n^2 + y_n^2)} = f\sqrt{x_n^2+y_n^2} = f r_n" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="307" height="22"></p>
<p>Lets parameterize our camera model with normalized coordinates:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-22863a98deab9a88a0b2bff819ef8caf_l3.png" class="ql-img-inline-formula " alt="x_{p}^{d} = k_x (x_i + \delta x_i^{(r)} + \delta x_i^{(t)}) + x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="243" height="27"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-60e827a6aa3ab3e5d7776c74baf281f5_l3.png" class="ql-img-inline-formula " alt="x_{p}^{d} = k_x (x_i + x_i(k_1 r_i^{2} + k_2 r_i^{4}) + 2 p_1 x_i y_i + p_2(r_i^{2} +2 x_i^{2})) + x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="460" height="22"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-4eee2389bb8c08225c31fb2b14bffbf4_l3.png" class="ql-img-inline-formula " alt="x_{p}^{d} = k_x (f x_n (1 + f^2 k_1  r_n^{2} + f^4 k_2  r_n^{4}) + 2 f^2 p_1 x_n y_n + f^2 p_2 (r_n^{2} +2 x_n^{2})) + x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="552" height="22"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3494fd8dfa7d2c0ced990977167e1f25_l3.png" class="ql-img-inline-formula " alt="x_{p}^{d} = f k_x ( x_n (1 + f^2 k_1 r_n^{2} + f^4 k_2 r_n^{4}) + 2 f p_1 x_n y_n + f p_2 (r_n^{2} +2 x_n^{2})) + x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="537" height="22"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-83005ead62ed91e73edce2728e774946_l3.png" class="ql-img-inline-formula " alt="x_{p}^{d} = \alpha_x ( x_n (1 + \beta_1 r_n^{2} + \beta_2 r_n^{4}) + 2 \beta_3 x_n y_n + \beta_4 (r_n^{2} +2 x_n^{2})) + x_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="475" height="22"></p>
<p>Doing the same for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-dc5de20dcdb45c6a9f81ede8889bdfc8_l3.png" class="ql-img-inline-formula " alt=" y_p^d " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="17" height="22">, we obtain:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-794539e33ba04feaa562e73af8c48532_l3.png" class="ql-img-inline-formula " alt="y_{p}^{d} = \alpha_y ( y_n (1 + \beta_1 r_n^{2} + \beta_2 r_n^{4}) + \beta_3 (r_n^{2} +2 y_n^{2}) + 2 \beta_4 x_n y_n ) + y_o" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="469" height="22"></p>
<p>Where:</p>
<ul class="ili-indent">
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a04089c242de95dad80dd3f51c728d01_l3.png" class="ql-img-inline-formula " alt=" \beta_1 = f^2 k_1 " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="75" height="19"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-fe5fcbbf6cc03c62dbd64b58ab8931cc_l3.png" class="ql-img-inline-formula " alt=" \beta_2 = f^4 k_2 " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="76" height="19"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c3d83f203bc48369ff14c4856a49a0b1_l3.png" class="ql-img-inline-formula " alt=" \beta_3 = f p_1 " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="67" height="16"></li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c2f6023a0d94c0e86367796265430fd4_l3.png" class="ql-img-inline-formula " alt=" \beta_4 = f p_2 " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="68" height="16"></li>
</ul>
<p>Let:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5ae36a78f96b07dc54e772fa1a114c49_l3.png" class="ql-img-inline-formula " alt=" \vec{m} " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="15" height="13"> = parameterization of extrinsic parameters (expanded on soon)</p>
<p>Now, take the partial derivatives of <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5b87fecc44761bb60cc6cd2b248629b6_l3.png" class="ql-img-inline-formula " alt="x_{p}^{d}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="18" height="22">:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-64fc0f97a7bf47440e34b1123ebc1c22_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{x^d_p}}{\partial{\alpha_x}} = x_n(1+\beta_1 r_n^2 + \beta_2 r_n^4 ) + 2 \beta_3 x_n y_n + \beta_4 (r_n^2 +2 x_n^2) " title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="410" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-7b77fa53738853acfdeec75e5a500d96_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{x^d_p}}{\partial{\alpha_y}} = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -10px;" width="59" height="31"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8a760141bb38d4860fd4622d1233a705_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{x^d_p}}{\partial{x_o}} = 1 " title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="56" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c39021af7fba0d7e792109b55e3e12a0_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{x^d_p}}{\partial{y_o}} = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="57" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b56b8d6d66f4e735870683b88b8020b1_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{x^d_p}}{\partial{\beta_1}} = \alpha_x x_n r_n^2 " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="104" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-26a29218728c9714f6871a519d7c0764_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{x^d_p}}{\partial{\beta_2}} = \alpha_x x_n r_n^4 " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="104" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-76c59353c0a9da75ca41f01c277578a8_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{x^d_p}}{\partial{\beta_3}} = 2 \alpha_x x_n y_n " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="113" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-2f72d16b334a861007a2093d16cdf17f_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{x^d_p}}{\partial{\beta_4}} = \alpha_x(r_n^2 + 2 x_n^2) " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="148" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8c6a01767a000b53039e779f8351f3a9_l3.png" class="ql-img-inline-formula " alt=" \begin{gathered}\frac{\partial{x^d_p}}{\partial{\vec{m}}} = \alpha_x[\frac{\partial{x_n}}{\partial{\vec{m}}}(1+\beta_1 r_n^2 + \beta_2 r_n^4) + x_n(2 \beta_1 r_n \frac{\partial{r_n}} {\partial{\vec{m}}} + 4 \beta_2 r_n^3 \frac{\partial{r_n}}{\partial{\vec{m}}}) + 2 \beta_3 (\frac{\partial{x_n}}{\partial{\vec{m}}} y_n + x_n\frac{\partial{y_n}}{\partial{\vec{m}}}) + \beta_4(2 r_n \frac{\partial{r_n}}{\partial{\vec{m}}} + 4 x_n \frac{\partial{x_n}}{\partial{\vec{m}}})] \end{gathered} " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="858" height="43"></p>
<p>Do the same for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-4e2eb498bba0326174781c7419a95f97_l3.png" class="ql-img-inline-formula " alt="y_{p}^{d}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="17" height="22">:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6576927a2e2a9fe6e4aab5cf84a42f3c_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{y^d_p}}{\partial{\alpha_x}} = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="59" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-78fcf0084314001cf8ba7fd8ff767458_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{y^d_p}}{\partial{\alpha_y}} = y_n(1+\beta_1 r_n^2 + \beta_2 r_n^4 ) + \beta_3 (r_n^2 +2 y_n^2) + 2 \beta_4 x_n y_n " title="Rendered by QuickLaTeX.com" style="vertical-align: -10px;" width="407" height="31"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e41f93cf91d6a79579d88d7c34798102_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{y^d_p}}{\partial{x_o}} = 0 " title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="57" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-39528301ad0352dbb7445cca2c09359d_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{y^d_p}}{\partial{y_o}} = 1 " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="56" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-001d6f488cb16cb8d0c8ea73c8940630_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{y^d_p}}{\partial{\beta_1}} = \alpha_y y_n r_n^2 " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="101" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-28471fad08cb937935900c4580864f3d_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{y^d_p}}{\partial{\beta_2}} = \alpha_y y_n r_n^4 " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="101" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-ed744193eb729237060b4425f37b05a8_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{y^d_p}}{\partial{\beta_3}} = \alpha_y(r_n^2 + 2 y_n^2) " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="146" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3da7e67fcb4c81ff137da02ee9ee2ac7_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{y^d_p}}{\partial{\beta_4}} = 2 \alpha_y x_n y_n " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="113" height="30"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8b52220105282dd7b0f931526b19cdfa_l3.png" class="ql-img-inline-formula " alt=" \begin{gathered}\frac{\partial{y^d_p}}{\partial{\vec{m}}} = \alpha_y[\frac{\partial{y_n}}{\partial{\vec{m}}}(1+\beta_1 r_n^2 + \beta_2 r_n^4) + y_n(2 \beta_1 r_n \frac{\partial{r_n}} {\partial{\vec{m}}} + 4 \beta_2 r_n^3 \frac{\partial{r_n}}{\partial{\vec{m}}}) + \beta_3(2 r_n \frac{\partial{r_n}}{\partial{\vec{m}}} + 4 y_n \frac{\partial{y_n}}{\partial{\vec{m}}})+ 2 \beta_4 (\frac{\partial{x_n}}{\partial{\vec{m}}} y_n + x_n\frac{\partial{y_n}}{\partial{\vec{m}}})] \end{gathered} " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="851" height="43"></p>
<p>Note that:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-fd70f0d79a52d359a19f7ba5b34e9dd6_l3.png" class="ql-img-inline-formula " alt="r_n = (x_n^2 + y_n^2)^{\frac{1}{2}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="121" height="22"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8be3cba50b8ce3fe4d2e7a4f7a3993d0_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{r_n}}{\partial{\vec{m}}} = \frac{1}{2}(x_n^2 + y_n^2)^{-\frac{1}{2}}(2 x_n \frac{\partial{x_n}}{\partial{\vec{m}}} + 2 y_n \frac{\partial{y_n}}{\partial{\vec{m}}}) = \frac{x_n\frac{\partial{x_n}}{\partial{\vec{m}}} + y_n \frac{\partial{y_n}}{\partial{\vec{m}}}}{r_n} " title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="418" height="32"></p>
<p>Now we must find <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a3fcb260b10e1bc815cb781fae8e82fc_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{x_n}}{\partial{\vec{m}}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="25" height="24"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3362001ae1af88805255be6377101647_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{y_n}}{\partial{\vec{m}}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="24" height="25">.</p>
<p>But, before we can do that, we must parameterize rotation. For that, 
I’ve elected to use Euler angles; I specify a X-Y-Z rotation sequence:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-bd4d1fc998625aeedf2e7b79ce1f31d4_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} R \end{bmatrix} = \begin{bmatrix} R_z(\theta_z)\end{bmatrix} \begin{bmatrix} R_y(\theta_y) \end{bmatrix} \begin{bmatrix} R_x(\theta_x) \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="251" height="22"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-178001d14814fcc46e1eb5c19741152d_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} R \end{bmatrix} = \begin{bmatrix} cos(\theta_z) &amp; -sin(\theta_z) &amp; 0 \\ sin(\theta_z) &amp; cos(\theta_z) &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} cos(\theta_y) &amp; 0 &amp; sin(\theta_y) \\ 0 &amp; 1 &amp; 0 \\ -sin(\theta_y) &amp; 0 &amp; cos(\theta_y) \end{bmatrix} \begin{bmatrix} 1 &amp; 0 &amp; 0 \\ 0 &amp; cos(\theta_x) &amp; -sin(\theta_x) \\ 0 &amp; sin(\theta_x) &amp; cos(\theta_x) \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="618" height="65"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-079d7a059babd25d818c594718dd0ba5_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} R \end{bmatrix} = \begin{bmatrix} cos(\theta_y) cos(\theta_z) &amp; -cos(\theta_x)sin(\theta_z) + sin(\theta_x)sin(\theta_y)cos(\theta_z) &amp; sin(\theta_x)sin(\theta_z)+cos(\theta_x)sin(\theta_y)cos(\theta_z) \\ cos(\theta_y)sin(\theta_z) &amp; cos(\theta_x)cos(\theta_z) + sin(\theta_x)sin(\theta_y)sin(\theta_z) &amp; -sin(\theta_x)cos(\theta_z)+cos(\theta_x)sin(\theta_y)sin(\theta_z) \\ -sin(\theta_y) &amp; sin(\theta_x)cos(\theta_y) &amp; cos(\theta_x) cos(\theta_y) \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="832" height="65"></p>
<p>Note that the inverse is:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-837bfea0c1546b4505634e36bf87fda8_l3.png" class="ql-img-inline-formula " alt=" \theta_x = atan2(R_{32}, R_{33}) " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="162" height="18"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-39148eb41cd21ab942085f7680b9a975_l3.png" class="ql-img-inline-formula " alt=" \theta_y = atan2(-R_{31}, \sqrt{R_{11}^2 + R_{21}^2}) " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="243" height="22"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6a638c975db40e3e75ca641a0f5f357d_l3.png" class="ql-img-inline-formula " alt=" \theta_z = atan2(R_{21}, R_{11}) " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="161" height="18"></p>
<p>We take the Jacobian:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-4256e7921098e2626016ea8f3c2e587a_l3.png" class="ql-img-inline-formula " alt="   \begin{bmatrix} \frac{\partial{\vec{R}}}{\partial{\vec{\theta}}} \end{bmatrix} = \begin{blockarray}{cccc} &amp; \partial{\theta_x} &amp; \partial{\theta_y} &amp; \partial{\theta_z} \\ \begin{block}{c[ccc@{\hspace*{5pt}}]} \partial{R_{11}} &amp; 0 &amp; $-sin(\theta_y)cos(\theta_z)$ &amp; $-cos(\theta_y)sin(\theta_z)$ \\ \partial{R_{21}} &amp; 0 &amp; $-sin(\theta_y)sin(\theta_z)$ &amp; $cos(\theta_y)cos(\theta_z)$ \\ \partial{R_{31}} &amp; 0 &amp; $-cos(\theta_y)$ &amp; 0 \\ \partial{R_{12}} &amp; $sin(\theta_x)sin(\theta_z)+cos(\theta_x)sin(\theta_y)cos(\theta_z)$ &amp; $sin(\theta_x)cos(\theta_y)cos(\theta_z)$ &amp; $-cos(\theta_x)cos(\theta_z)-sin(\theta_x)sin(\theta_y)sin(\theta_z)$ \\ \partial{R_{22}} &amp; $-sin(\theta_x)cos(\theta_z)+cos(\theta_x)sin(\theta_y)sin(\theta_z)$ &amp; $sin(\theta_x)cos(\theta_y)sin(\theta_z)$ &amp; $-cos(\theta_x)sin(\theta_z) + sin(\theta_x) sin(\theta_y) cos(\theta_z)$ \\ \partial{R_{32}} &amp; $cos(\theta_x)cos(\theta_y)$ &amp; $-sin(\theta_x)sin(\theta_y)$ &amp; 0 \\ \partial{R_{13}} &amp; $cos(\theta_x)sin(\theta_z)-sin(\theta_x)sin(\theta_y)cos(\theta_z)$ &amp; $cos(\theta_x)cos(\theta_y)cos(\theta_z)$ &amp; $sin(\theta_x)cos(\theta_z)-cos(\theta_x)sin(\theta_y)sin(\theta_z)$ \\ \partial{R_{23}} &amp; $-cos(\theta_x)cos(\theta_z)-sin(\theta_x)sin(\theta_y)sin(\theta_z)$ &amp; $cos(\theta_x)cos(\theta_y)sin(\theta_z)$ &amp; $sin(\theta_x)sin(\theta_z) + cos(\theta_x)sin(\theta_y)cos(\theta_z)$ \\ \partial{R_{33}} &amp; $-sin(\theta_x)cos(\theta_y)$ &amp; $-cos(\theta_x)sin(\theta_y)$ &amp; 0 \\ \end{block} \end{blockarray} " title="Rendered by QuickLaTeX.com" style="vertical-align: 20px;" width="958" height="217"></p>
<p>Now, we can compute the full Jacobian:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-a2d5879f3abdfd5555ab2628d6b4574c_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} \frac{\partial{\vec{p_n}}}{\partial{\vec{m}}} \end{bmatrix} = \begin{bmatrix} \frac{\partial{\vec{p_n}}}{\partial{\vec{Rt}}} \end{bmatrix} \begin{bmatrix} \frac{\partial{\vec{Rt}}}{\partial{\vec{m}}} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="151" height="32"></p>
<p>Where:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-fa8a6273648615f7456be0afb299f74c_l3.png" class="ql-img-inline-formula " alt="  \begin{bmatrix} \frac{\partial{\vec{p_n}}}{\partial{\vec{Rt}}} \end{bmatrix} = \begin{blockarray}{cccccccccc} &amp; \partial{R_{11}} &amp; \partial{R_{21}} &amp; \partial{R_{31}} &amp; \partial{R_{12}} &amp; \partial{R_{22}} &amp; \partial{R_{32}} &amp; \partial{t_x} &amp; \partial{t_y} &amp; \partial{t_z} \\ \begin{block}{c[ccccccccc@{\hspace*{5pt}}]} \partial{x_n} &amp; $\frac{X_w}{z_s}$ &amp; 0 &amp; $\frac{-x_s X_w}{z_s^2}$ &amp; $\frac{Y_w}{z_s}$ &amp; 0 &amp; $\frac{-x_s Y_w}{z_s^2}$ &amp; $\frac{1}{z_s}$ &amp; 0 &amp; $\frac{-x_s}{z_s^2}$ \\ \partial{y_n} &amp; 0 &amp; $\frac{X_w}{z_s}$ &amp; $\frac{-y_s X_w}{z_s^2}$ &amp; 0 &amp; $\frac{Y_w}{z_s}$ &amp; $\frac{-y_s Y_w}{z_s^2}$ &amp; 0 &amp; $\frac{1}{z_s}$ &amp; $\frac{-y_s}{z_s^2}}$ \\ \end{block} \end{blockarray} " title="Rendered by QuickLaTeX.com" style="vertical-align: 19px;" width="610" height="72"></p>
<p>and:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3cfb85668afb7329e145133976568e3d_l3.png" class="ql-img-inline-formula " alt="  \begin{bmatrix} \frac{\partial{\vec{Rt}}}{\partial{\vec{m}}} \end{bmatrix} = \begin{blockarray}{ccccccc} &amp; \partial{\theta_x} &amp; \partial{\theta_y} &amp; \partial{\theta_z} &amp; \partial{t_x} &amp; \partial{t_y} &amp; \partial{t_z} \\ \begin{block}{c[ccc|ccc@{\hspace*{5pt}}]} \partial{R_{11}} &amp; \BAmulticolumn{3}{c|}{\multirow{6}{*}{$From\ \begin{bmatrix} \frac{\partial{\vec{R}}}{\partial{\vec{\theta}}} \end{bmatrix}$}} &amp; \BAmulticolumn{3}{c}{\multirow{6}{*}{$0$}} \\ \partial{R_{21}} &amp; &amp; &amp; &amp; &amp; &amp; \\ \partial{R_{31}} &amp; &amp; &amp; &amp; &amp; &amp; \\ \partial{R_{12}} &amp; &amp; &amp; &amp; &amp; &amp; \\ \partial{R_{22}} &amp; &amp; &amp; &amp; &amp; &amp; \\ \partial{R_{32}} &amp; &amp; &amp; &amp; &amp; &amp; \\ \cline{2-7}% don't use \hline \partial{t_x} &amp; \BAmulticolumn{3}{c|}{\multirow{3}{*}{$0$}} &amp; 1 &amp; 0 &amp; 0 \\ \partial{t_y} &amp; &amp; &amp; &amp; 0 &amp; 1 &amp; 0 \\ \partial{t_z} &amp; &amp; &amp; &amp; 0 &amp; 0 &amp; 1 \\ \end{block} \end{blockarray} " title="Rendered by QuickLaTeX.com" style="vertical-align: -98px;" width="396" height="218"></p>
<p>We can now define our cost function for single camera calibration:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0e2a000a9673f6062f0da2124c3bdfcb_l3.png" class="ql-img-inline-formula " alt=" C_{LS} = \sum_{j=1}^{M}\sum_{i=1}^{N} (x_{ij}^d-x_{ij}^m)^2 + (y_{ij}^d-y_{ij}^m)^2 = \sum_{j=1}^{M}\sum_{i=1}^{N}res_{x_{ij}}^2 + res_{y_{ij}}^2" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="561" height="25"></p>
<p>Where:</p>
<ul class="ili-indent">
<li>M = number of calibration board images</li>
<li>N = number of points on calibration board</li>
</ul>
<p>We put all of our parameters (intrinsic + extrinsic) in a single vector, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-379083fa85ad4dc2a019008a69cc6b1f_l3.png" class="ql-img-inline-formula " alt=" \vec{p} " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="13" height="17">:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c340bcb78a4ac0e8c5843696f8ef960e_l3.png" class="ql-img-inline-formula " alt=" \vec{p} = (\overbrace{\alpha_x,\ \alpha_y,\ x_o,\ y_o,\ \beta_1,\ \beta_2,\ \beta_3,\ \beta_4}^8,\ \overbrace{\theta_{x_1},\ \theta_{y_1},\ \theta_{z_1},\ t_{x_1},\ t_{y_1},\ t_{z_1},\ ...,\ \theta_{x_M},\ \theta_{y_M},\ \theta_{z_M},\ t_{x_M},\ t_{y_M},\ t_{z_M}}^{6M})" title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="782" height="43"></p>
<p>Which results in 8+6M total parameters.</p>
<p>To compute the Jacobian, we start off with the residuals:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0e237962664ac47d2e0e711d85d5d6c1_l3.png" class="ql-img-inline-formula " alt=" res_x = x^d(\vec{p})-x^m " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="142" height="19"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-9fbc15a4bb5b5c26959b8dc3c8f273c0_l3.png" class="ql-img-inline-formula " alt=" res_y = y^d(\vec{p})-y^m " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="140" height="21"></p>
<p>Take the partial derivative:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-789940d42542610134eee4300b3c58b8_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{res_x}}{\partial{\vec{p}}} = \frac{\partial{x}^d}{\partial{\vec{p}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="85" height="27"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-d603caa960d078a0f9910a7e8fdf582e_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{res_y}}{\partial{\vec{p}}} = \frac{\partial{y}^d}{\partial{\vec{p}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="85" height="28"></p>
<p>The Jacobian has the form:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5e53ce011339b40ffb5155b6e40f4182_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}J\end{bmatrix}_{ij} = \begin{bmatrix} \frac{\partial{res_i}}{\partial{\vec{p_j}}}\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="109" height="32"></p>
<p>Where:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-509bd79f1e9a0d15139adaa30bdc117c_l3.png" class="ql-img-inline-formula " alt="  \newcommand\overmat[2]{% \makebox[0pt][l]{$\smash{\color{white}\overbrace{\phantom{% \begin{matrix}#2 \end{matrix}}}^{\text{\color{black}#1}}}$}#2} \newcommand\bovermat[2]{% \makebox[0pt][l]{$\smash{\overbrace{\phantom{% \begin{matrix}#2\end{matrix}}}^{\text{#1}}}$}#2} \newcommand\coolrightbrace[2]{% \left.\vphantom{\begin{matrix} #1 \end{matrix}}\right\}#2}  \begin{bmatrix} J \end{bmatrix} = \begin{blockarray}{cccccc} &amp; \bovermat{8+6M}{\partial{\vec{a}} &amp; \partial{\vec{m_1}} &amp; \partial{\vec{m_2}} &amp; \hdots &amp; \partial{\vec{m_M}}} \\ \begin{block}{c[ccccc@{\hspace*{5pt}}]} \partial{\vec{res_1}} &amp; X &amp; X &amp; 0 &amp; \hdots &amp; 0 \\ \partial{\vec{res_2}} &amp; X &amp; 0 &amp; X &amp; \hdots &amp; 0 \\ \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ \partial{\vec{res_M}} &amp; X &amp; 0 &amp; 0 &amp; \hdots &amp; X \\ \end{block} \end{blockarray}% \begin{matrix} \\ \coolrightbrace{\begin{blockarray}{cccccc} &amp; \bovermat{8+6M}{\partial{\vec{a}} &amp; \partial{\vec{m_1}} &amp; \partial{\vec{m_2}} &amp; \hdots &amp; \partial{\vec{m_M}}} \\ \begin{block}{c[ccccc@{\hspace*{5pt}}]} \partial{\vec{res_1}} &amp; X &amp; X &amp; 0 &amp; \hdots &amp; 0 \\ \partial{\vec{res_2}} &amp; X &amp; 0 &amp; X &amp; \hdots &amp; 0 \\ \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ \partial{\vec{res_M}} &amp; X &amp; 0 &amp; 0 &amp; \hdots &amp; X \\ \end{block} \end{blockarray}}{2NM} \\ \end{matrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -76px;" width="430" height="172"></p>
<p>Where the <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-996ff7036e644e89f8ac379fa58d0cf7_l3.png" class="ql-img-inline-formula " alt="X" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="16" height="12">‘s represent filled blocks and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8354ade9c79ec6a7ac658f2c3032c9df_l3.png" class="ql-img-inline-formula " alt="0" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="9" height="12">‘s
 are empty blocks. This makes intuitive since, as the intrinsic 
parameters will affect the residuals for all calibration board images. 
For extrinsics, only the extrinsic parameters for a specific calibration
 board image will affect its residuals.</p>
<p>To solve this, I’d recommend using the Levenberg-Marquardt method 
since the nonlinear optimization is not well-behaved under certain 
circumstances (In my tests, if very few calibration boards are provided,
 it can cause the Gauss-Newton method to fail):</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-83533d50baa0dc0b7c8b88cd8c4912da_l3.png" class="ql-img-inline-formula " alt=" \Delta\vec{p} = -(\begin{bmatrix}J\end{bmatrix}^T \begin{bmatrix} J \end{bmatrix} + \lambda\begin{bmatrix}I\end{bmatrix})^{-1}\begin{bmatrix}J\end{bmatrix}^T \vec{res}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="286" height="26"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e6916618f15b19351fc60189141cba8f_l3.png" class="ql-img-inline-formula " alt="\vec{p_{new}} = \vec{p_{old}} + \Delta\vec{p}" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="136" height="17"></p>
<p>As usual, it’s recommended to use a sparse linear solver instead of directly taking the inverse.</p>
<p>Some things:</p>
<ul class="ili-indent">
<li>All initial guesses are used from the previous sections. <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-dff50ab66b848b910ea781069cba1094_l3.png" class="ql-img-inline-formula " alt="\beta_1" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="16" height="16">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-dcc5ca9e4b5486ade7941bcfad7f2fbf_l3.png" class="ql-img-inline-formula " alt="\beta_2" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="17" height="16">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0a382c7655ff6762eae970ce1790af7e_l3.png" class="ql-img-inline-formula " alt="\beta_3" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="17" height="16">, and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-12ff7362032c02045afdb3577ed91edd_l3.png" class="ql-img-inline-formula " alt="\beta_4" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="17" height="16"> are all initialized to zero.</li>
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8c37d2f1acb1d49f3e5e655797880475_l3.png" class="ql-img-inline-formula " alt="\lambda" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="12">
 is usually initialized to 0.01 and will either grow or shrink every 
iteration depending on whether the mean squared error (MSE) increases or
 decreases. If MSE decreases, then <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8c37d2f1acb1d49f3e5e655797880475_l3.png" class="ql-img-inline-formula " alt="\lambda" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="12"> is decreased and we proceed to the next iteration. If MSE increases, then we increase <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8c37d2f1acb1d49f3e5e655797880475_l3.png" class="ql-img-inline-formula " alt="\lambda" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="12">
 until MSE descreases. Increasing lambda has the two effects: 1) it 
makes the step closer to the gradient and 2) it reduces the step size. 
Decreasing lambda has the effect of making the step closer to the 
Gauss-Newton method, which is an agressive optimization. Using small 
steps in the direction of the gradient is incredibly robust, but 
slightly slow.</li>
<li>If there is only a single calibration board image, the principle 
point is removed from the optimization (simply remove the columns from 
the Jacobian corresponding to those two parameters, and then do not 
update them during the iterations), as it is very unstable.</li>
</ul>
<p>We now have enough information to fully calibrate and optimize a camera using a calibration board.</p>
<h2>Stereo Vision</h2>
<p>The first thing we need to consider is how to incorporate two cameras
 into the model. We do this by simply adding the transformation between 
the two cameras as follows:</p>
<p><img decoding="async" loading="lazy" class="size-medium aligncenter" src="Camera-Calibration-Theory-justinblaber.org_files/4ZZgMf3.png" width="407" height="404"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e5ff1b7e8f49e309a2b1188856cc8c40_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} \begin{bmatrix} R_R \end{bmatrix} &amp; \vec{t_R} \\ 0 &amp; 1 \end{bmatrix} = \begin{bmatrix} \begin{bmatrix} R_s \end{bmatrix} &amp; \vec{t_s} \\ 0 &amp; 1 \end{bmatrix} \begin{bmatrix} \begin{bmatrix} R_L \end{bmatrix} &amp; \vec{t_L} \\ 0 &amp; 1 \end{bmatrix} = \begin{bmatrix} \begin{bmatrix} R_s \end{bmatrix} \begin{bmatrix} R_L \end{bmatrix} &amp; \begin{bmatrix} R_s \end{bmatrix} \vec{t_L} + \vec{t_s} \\ 0 &amp; 1 \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -17px;" width="510" height="44"></p>
<p>This results in:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-db1f56a79eec6fdab66470d5cb1868a6_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} R_R \end{bmatrix} = \begin{bmatrix} R_s \end{bmatrix} \begin{bmatrix} R_L \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="134" height="22"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e90c4c896539834a9ce55704e4738cb8_l3.png" class="ql-img-inline-formula " alt=" \vec{t_R} = \begin{bmatrix} R_s \end{bmatrix} \vec{t_L} + \vec{t_s} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="131" height="23"></p>
<p>We can solve for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-f9f753b34b3ce575a9685cdcf0181faf_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix} R_s \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="29" height="22"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-56d08e88efcac29ceb69e74d639b8122_l3.png" class="ql-img-inline-formula " alt="\vec{t_s}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="13" height="19">:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b51c94596bdb466d8075ee843d808169_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} R_s \end{bmatrix} = \begin{bmatrix} R_R \end{bmatrix} \begin{bmatrix} R_L \end{bmatrix}^T " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="147" height="26"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-44c613065ff094f7035d37bbb19879e3_l3.png" class="ql-img-inline-formula " alt=" \vec{t_s} = \vec{t_R} - \begin{bmatrix} R_R \end{bmatrix} \begin{bmatrix} R_L \end{bmatrix}^T\vec{t_L} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="186" height="26"></p>
<p>In order to optimize the stereo model, we do the following:</p>
<ul class="ili-indent">
<li>We get initial guesses for the intrinsics, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-edfaa8b474fd9d7092eaacb58041fe7b_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}R_L\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="32" height="22">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-147d049744e43e14c2edde3267f7f50a_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}R_R\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="33" height="22">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-1b5ae5d35e12234a0d313922e8662364_l3.png" class="ql-img-inline-formula " alt="\vec{t_L}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="15" height="19"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-683d39cf019e153fba6f6cc8eb6450a9_l3.png" class="ql-img-inline-formula " alt="\vec{t_R}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="17" height="19"> by doing single camera optimization on each camera separately.</li>
<li>Instead of optimizing&nbsp;<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-edfaa8b474fd9d7092eaacb58041fe7b_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}R_L\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="32" height="22">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-147d049744e43e14c2edde3267f7f50a_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}R_R\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="33" height="22">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-1b5ae5d35e12234a0d313922e8662364_l3.png" class="ql-img-inline-formula " alt="\vec{t_L}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="15" height="19">, and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-683d39cf019e153fba6f6cc8eb6450a9_l3.png" class="ql-img-inline-formula " alt="\vec{t_R}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="17" height="19"> for each calibration board image, we instead optimize <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-edfaa8b474fd9d7092eaacb58041fe7b_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}R_L\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="32" height="22">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-576849ad2abb670a8ce1948f567f5682_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}R_s\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="29" height="22">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-1b5ae5d35e12234a0d313922e8662364_l3.png" class="ql-img-inline-formula " alt="\vec{t_L}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="15" height="19">, and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-56d08e88efcac29ceb69e74d639b8122_l3.png" class="ql-img-inline-formula " alt="\vec{t_s}" title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="13" height="19">. This reduces the number of extrinsic parameters from 12M to 6M+6, where M is the number of calibration board image pairs.</li>
<li>To get an initial guess for <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-dcd279c9b359bd80e33390be03c7fdfa_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} R_s \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="29" height="22"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-811ef751ecf63d6d657d80ea9e2212cc_l3.png" class="ql-img-inline-formula " alt=" \vec{t_s} " title="Rendered by QuickLaTeX.com" style="vertical-align: -3px;" width="13" height="19">, we do the following:
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-dcee757f1a117d0b602b7a2e95f37128_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} r_{R_{11}} &amp; r_{R_{12}} &amp; r_{R_{13}} \\ r_{R_{21}} &amp; r_{R_{22}} &amp; r_{R_{23}} \\ r_{R_{31}} &amp; r_{R_{32}} &amp; r_{R_{33}} \\ \end{bmatrix} = \begin{bmatrix} r_{s_{11}} &amp; r_{s_{12}} &amp; r_{s_{13}} \\ r_{s_{21}} &amp; r_{s_{22}} &amp; r_{s_{23}} \\ r_{s_{31}} &amp; r_{s_{32}} &amp; r_{s_{33}} \\ \end{bmatrix} \begin{bmatrix} r_{L_{11}} &amp; r_{L_{12}} &amp; r_{L_{13}} \\ r_{L_{21}} &amp; r_{L_{22}} &amp; r_{L_{23}} \\ r_{L_{31}} &amp; r_{L_{32}} &amp; r_{L_{33}} \\ \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="456" height="65"></p>
<p>Then:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-90f24065cd115b88abb17bea20707075_l3.png" class="ql-img-inline-formula " alt=" r_{R_{11}} = r_{s_{11}}r_{L_{11}} + r_{s_{12}}r_{L_{21}} + r_{s_{13}}r_{L_{31}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="272" height="17"><br>
<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-58f9b8a166f5546ab1711e38e6e4e513_l3.png" class="ql-img-inline-formula " alt=" r_{R_{21}} = r_{s_{21}}r_{L_{11}} + r_{s_{22}}r_{L_{21}} + r_{s_{23}}r_{L_{31}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="272" height="17"><br>
<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e1956a228aeed1c1584b25e064c54bf4_l3.png" class="ql-img-inline-formula " alt=" r_{R_{31}} = r_{s_{31}}r_{L_{11}} + r_{s_{32}}r_{L_{21}} + r_{s_{33}}r_{L_{31}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="272" height="17"><br>
<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8fcafc452fa570dc64cd6c304ecbe242_l3.png" class="ql-img-inline-formula " alt=" r_{R_{12}} = r_{s_{11}}r_{L_{12}} + r_{s_{12}}r_{L_{22}} + r_{s_{13}}r_{L_{32}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="273" height="17"><br>
<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-58408af149ac2864e38aab9881f4b22e_l3.png" class="ql-img-inline-formula " alt=" r_{R_{22}} = r_{s_{21}}r_{L_{12}} + r_{s_{22}}r_{L_{22}} + r_{s_{23}}r_{L_{32}} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="273" height="17"><br>
<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-96b97dcfcaaedbafcbc2d928bed95d8b_l3.png" class="ql-img-inline-formula " alt=" \vdots " title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="3" height="15"></p>
<p>and:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-86ef80dff0337f6f449813d4dfbed870_l3.png" class="ql-img-inline-formula " alt=" t_{R_x} = r_{s_{11}}t_{L_x} + r_{s_{12}}t_{L_y} + r_{s_{13}}t_{L_z} + t_{s_x} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="287" height="18"><br>
<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-bcf23be42dd3cc71a7a6976d8f2ad24c_l3.png" class="ql-img-inline-formula " alt=" t_{R_y} = r_{s_{21}}t_{L_x} + r_{s_{22}}t_{L_y} + r_{s_{23}}t_{L_z} + t_{s_y} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="287" height="18"><br>
<img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-19dd1aef5b7345273452739812a5cf46_l3.png" class="ql-img-inline-formula " alt=" t_{R_z} = r_{s_{31}}t_{L_x} + r_{s_{32}}t_{L_y} + r_{s_{33}}t_{L_z} + t_{s_z} " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="286" height="18"></p>
<p>If we put these in matrix form:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-28a6086dea343891fe32db968d27be75_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} r_{L_{11}} &amp; 0 &amp; 0 &amp; r_{L_{21}} &amp; 0 &amp; 0 &amp; r_{L_{31}} &amp; 0 &amp; 0 \\ 0 &amp; r_{L_{11}} &amp; 0 &amp; 0 &amp; r_{L_{21}} &amp; 0 &amp; 0 &amp; r_{L_{31}} &amp; 0 \\ 0 &amp; 0 &amp; r_{L_{11}} &amp; 0 &amp; 0 &amp; r_{L_{21}} &amp; 0 &amp; 0 &amp; r_{L_{31}} \\ r_{L_{12}} &amp; 0 &amp; 0 &amp; r_{L_{22}} &amp; 0 &amp; 0 &amp; r_{L_{32}} &amp; 0 &amp; 0 \\ 0 &amp; r_{L_{12}} &amp; 0 &amp; 0 &amp; r_{L_{22}} &amp; 0 &amp; 0 &amp; r_{L_{32}} &amp; 0 \\ 0 &amp; 0 &amp; r_{L_{12}} &amp; 0 &amp; 0 &amp; r_{L_{22}} &amp; 0 &amp; 0 &amp; r_{L_{32}} \\ r_{L_{13}} &amp; 0 &amp; 0 &amp; r_{L_{23}} &amp; 0 &amp; 0 &amp; r_{L_{33}} &amp; 0 &amp; 0 \\ 0 &amp; r_{L_{13}} &amp; 0 &amp; 0 &amp; r_{L_{23}} &amp; 0 &amp; 0 &amp; r_{L_{33}} &amp; 0 \\ 0 &amp; 0 &amp; r_{L_{13}} &amp; 0 &amp; 0 &amp; r_{L_{23}} &amp; 0 &amp; 0 &amp; r_{L_{33}} \\ \end{bmatrix} \begin{bmatrix} r_{s_{11}} \\ r_{s_{21}} \\ r_{s_{31}} \\ r_{s_{12}} \\ r_{s_{22}} \\ r_{s_{32}} \\ r_{s_{13}} \\ r_{s_{23}} \\ r_{s_{33}} \\ \end{bmatrix} = \begin{bmatrix} r_{R_{11}} \\ r_{R_{21}} \\ r_{R_{31}} \\ r_{R_{12}} \\ r_{R_{22}} \\ r_{R_{32}} \\ r_{R_{13}} \\ r_{R_{23}} \\ r_{R_{33}} \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -94px;" width="555" height="194"></p>
<p>and:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-21c47b9e0f29ec5738e00f3cf660a64e_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} 1 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} t_{s_x} \\ t_{s_y} \\ t_{s_z} \end{bmatrix} = \begin{bmatrix} \vec{t_R}-\begin{bmatrix}R_R\end{bmatrix}\begin{bmatrix}R_L\end{bmatrix}^T\vec{t_L} \end{bmatrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -28px;" width="313" height="65"></p>
</li>
</ul>
<p>We now have a model for stereo vision and a way to provide an initial guess for this model.</p>
<p>Some things:</p>
<p><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-491d3ecfa04f82d830937f5c1ed5fcb4_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{x^d_L}}{\partial{\vec{a_L}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="25" height="28">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-54b2b0b6a2ed305b695bfc4546299f76_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{y^d_L}}{\partial{\vec{a_L}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="25" height="28">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-4d572b255ef0eb270f4d5f744891dd84_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{x^d_R}}{\partial{\vec{a_R}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="26" height="28">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5773caa63b50da382dc134b259768089_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{y^d_R}}{\partial{\vec{a_R}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="26" height="28"> have the same form as single camera calibration.</p>
<p><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0ff29b9d3ade54b36f2b4a4cae966907_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{x^d_L}}{\partial{\vec{m_L}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="30" height="28"> and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3af09731cd33fb4cb4b827e24a1b4a6c_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{y^d_L}}{\partial{\vec{m_L}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="30" height="28"> have the same form as single camera calibration.</p>
<p><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b1fd22ba26978626244e6883ed1a9c12_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{x^d_R}}{\partial{\vec{m_L}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="30" height="28">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3d835aca5e148331ca37051582ee8913_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{y^d_R}}{\partial{\vec{m_L}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="30" height="28">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0f7d7b51cd45a18bf5ce1087415d3601_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{x^d_R}}{\partial{\vec{m_s}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="27" height="28">, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c5c9b48551223106cb90441aca9a9a81_l3.png" class="ql-img-inline-formula " alt="\frac{\partial{y^d_R}}{\partial{\vec{m_s}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -8px;" width="27" height="28"> are new quantities that we need to derive.</p>
<p>We need to compute the Jacobians:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-d6724b92cb28a2393588acd7c22cc893_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} \frac{\partial{\vec{p_{n_R}}}}{\partial{\vec{m_L}}} \end{bmatrix} = \begin{bmatrix} \frac{\partial{\vec{p_{n_R}}}}{\partial{\vec{Rt_R}}} \end{bmatrix} \begin{bmatrix} \frac{\partial{\vec{Rt_R}}}{\partial{\vec{Rt_L}}} \end{bmatrix} \begin{bmatrix} \frac{\partial{\vec{Rt_L}}}{\partial{\vec{m_L}}} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="237" height="32"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-28edd8f9cccee1fbafe1f8645eb51536_l3.png" class="ql-img-inline-formula " alt=" \begin{bmatrix} \frac{\partial{\vec{p_{n_R}}}}{\partial{\vec{m_s}}} \end{bmatrix} = \begin{bmatrix} \frac{\partial{\vec{p_{n_R}}}}{\partial{\vec{Rt_R}}} \end{bmatrix} \begin{bmatrix} \frac{\partial{\vec{Rt_R}}}{\partial{\vec{Rt_s}}} \end{bmatrix} \begin{bmatrix} \frac{\partial{\vec{Rt_s}}}{\partial{\vec{m_s}}} \end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="234" height="32"></p>
<p>The only quantities we haven’t derived yet are:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-4b341a4856fc90b12b01b0ef5e62cdf7_l3.png" class="ql-img-inline-formula " alt="  \begin{bmatrix} \frac{\partial{\vec{Rt_R}}}{\partial{\vec{Rt_L}}} \end{bmatrix} = \begin{blockarray}{cccccccccc} &amp; \partial{r_{L_{11}}} &amp; \partial{r_{L_{21}}} &amp; \partial{r_{L_{31}}} &amp; \partial{r_{L_{12}}} &amp; \partial{r_{L_{22}}} &amp; \partial{r_{L_{32}}} &amp; \partial{t_{L_x}} &amp; \partial{t_{L_y}} &amp; \partial{t_{L_z}} \\ \begin{block}{c[ccccccccc@{\hspace*{5pt}}]} \partial{r_{R_{11}}} &amp; $r_{s_{11}}$ &amp; $r_{s_{12}}$ &amp; $r_{s_{13}}$ &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\ \partial{r_{R_{21}}} &amp; $r_{s_{21}}$ &amp; $r_{s_{22}}$ &amp; $r_{s_{23}}$ &amp; 0 &amp; 0 &amp;0 &amp; 0 &amp; 0 &amp; 0 \\ \partial{r_{R_{31}}} &amp; $r_{s_{31}}$ &amp; $r_{s_{32}}$ &amp; $r_{s_{33}}$ &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\ \partial{r_{R_{12}}} &amp; 0 &amp; 0 &amp; 0 &amp; $r_{s_{11}}$ &amp; $r_{s_{12}}$ &amp; $r_{s_{13}}$ &amp; 0 &amp; 0 &amp; 0 \\ \partial{r_{R_{22}}} &amp; 0 &amp; 0 &amp; 0 &amp; $r_{s_{21}}$ &amp; $r_{s_{22}}$ &amp; $r_{s_{23}}$ &amp; 0 &amp; 0 &amp; 0 \\ \partial{r_{R_{32}}} &amp; 0 &amp; 0 &amp; 0 &amp; $r_{s_{31}}$ &amp; $r_{s_{32}}$ &amp; $r_{s_{33}}$ &amp; 0 &amp; 0 &amp; 0 \\ \partial{t_{R_x}} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; $r_{s_{11}}$ &amp; $r_{s_{12}}$ &amp; $r_{s_{13}}$ \\ \partial{t_{R_y}} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; $r_{s_{21}}$ &amp; $r_{s_{22}}$ &amp; $r_{s_{23}}$ \\ \partial{t_{R_z}} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; $r_{s_{31}}$ &amp; $r_{s_{32}}$ &amp; $r_{s_{33}}$ \\ \end{block} \end{blockarray}  " title="Rendered by QuickLaTeX.com" style="vertical-align: 20px;" width="657" height="217"></p>
<p>and</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8642fd2b12ea41ff709746e194321b98_l3.png" class="ql-img-inline-formula " alt="   \begin{bmatrix} \frac{\partial{\vec{Rt_R}}}{\partial{\vec{Rt_s}}} \end{bmatrix} = \begin{blockarray}{ccccccccccccc} &amp; \partial{r_{s_{11}}} &amp; \partial{r_{s_{21}}} &amp; \partial{r_{s_{31}}} &amp; \partial{r_{s_{12}}} &amp; \partial{r_{s_{22}}} &amp; \partial{r_{s_{32}}} &amp; \partial{r_{s_{13}}} &amp; \partial{r_{s_{23}}} &amp; \partial{r_{s_{33}}} &amp; \partial{t_{s_x}} &amp; \partial{t_{s_y}} &amp; \partial{t_{s_z}} \\ \begin{block}{c[cccccccccccc@{\hspace*{5pt}}]} \partial{r_{R_{11}}} &amp; $r_{L_{11}}$ &amp; 0 &amp; 0 &amp; $r_{L_{21}}$ &amp; 0 &amp; 0 &amp; $r_{L_{31}}$ &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\ \partial{r_{R_{21}}} &amp; 0 &amp; $r_{L_{11}}$ &amp; 0 &amp; 0 &amp; $r_{L_{21}}$ &amp;0 &amp; 0 &amp; $r_{L_{31}}$ &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\ \partial{r_{R_{31}}} &amp; 0 &amp; 0 &amp; $r_{L_{11}}$ &amp; 0 &amp; 0 &amp; $r_{L_{21}}$ &amp; 0 &amp; 0 &amp; $r_{L_{31}}$ &amp; 0 &amp; 0 &amp; 0 \\ \partial{r_{R_{12}}} &amp; $r_{L_{12}}$ &amp; 0 &amp; 0 &amp; $r_{L_{22}}$ &amp; 0 &amp; 0 &amp; $r_{L_{32}}$ &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\ \partial{r_{R_{22}}} &amp; 0 &amp; $r_{L_{12}}$ &amp; 0 &amp; 0 &amp; $r_{L_{22}}$ &amp; 0 &amp; 0 &amp; $r_{L_{32}}$ &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\ \partial{r_{R_{32}}} &amp; 0 &amp; 0 &amp; $r_{L_{12}}$ &amp; 0 &amp; 0 &amp; $r_{L_{22}}$ &amp; 0 &amp; 0 &amp; $r_{L_{32}}$ &amp; 0 &amp; 0 &amp; 0 \\ \partial{t_{R_x}} &amp; $t_{L_x}$ &amp; 0 &amp; 0 &amp; $t_{L_y}$ &amp; 0 &amp; 0 &amp; $t_{L_z}$ &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 \\ \partial{t_{R_y}} &amp; 0 &amp; $t_{L_x}$ &amp; 0 &amp; 0 &amp; $t_{L_y}$ &amp; 0 &amp; 0 &amp; $t_{L_z}$ &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\ \partial{t_{R_z}} &amp; 0 &amp; 0 &amp; $t_{L_x}$ &amp; 0 &amp; 0 &amp; $t_{L_y}$ &amp; 0 &amp; 0 &amp; $t_{L_z}$ &amp; 0 &amp; 0 &amp; 1 \\ \end{block} \end{blockarray} " title="Rendered by QuickLaTeX.com" style="vertical-align: 20px;" width="803" height="217"></p>
<p>The rest of the Jacobians have already been derived in the single camera calibration section.</p>
<p>Now, we’re ready to define our cost function for stereo calibration:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-0f4729f7a1958b9612c91702ac331b84_l3.png" class="ql-img-inline-formula " alt=" C_{LS} = \sum_{j=1}^{M}\sum_{i=1}^{N} (x_{L_{ij}}^d-x_{L_{ij}}^m)^2 + (y_{L_{ij}}^d-y_{L_{ij}}^m)^2 + (x_{R_{ij}}^d-x_{R_{ij}}^m)^2 + (y_{R_{ij}}^d-y_{R_{ij}}^m)^2 " title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="627" height="26"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-67e20a9c1e1eaf6129e5e98e576622d0_l3.png" class="ql-img-inline-formula " alt=" C_{LS} = \sum_{j=1}^{M}\sum_{i=1}^{N} res_{x_{L_{ij}}}^2 + res_{y_{L_{ij}}}^2 + res_{x_{R_{ij}}}^2 + res_{y_{R_{ij}}}^2" title="Rendered by QuickLaTeX.com" style="vertical-align: -12px;" width="421" height="29"></p>
<p>Where:</p>
<ul class="ili-indent">
<li>M = number of calibration board image pairs</li>
<li>N = number of points on calibration board</li>
</ul>
<p>We put all of our parameters (intrinsic + extrinsic) in a single vector, <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-379083fa85ad4dc2a019008a69cc6b1f_l3.png" class="ql-img-inline-formula " alt=" \vec{p} " title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="13" height="17">:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-63afcba808d7153a6a3270afea36510a_l3.png" class="ql-img-inline-formula " alt=" \vec{p} = (\overbrace{\alpha_{x_L},\ \alpha_{y_L},\ x_{o_L},\ y_{o_L},\ \beta_{1_L},\ \beta_{2_L},\ \beta_{3_L},\ \beta_{4_L}}^8,\overbrace{\alpha_{x_R},\ \alpha_{y_R},\ x_{o_R},\ y_{o_R},\ \beta_{1_R},\ \beta_{2_R},\ \beta_{3_R},\ \beta_{4_R}}^8,\ \overbrace{\theta_{{x_L}_1},\ \theta_{{y_L}_1},\ \theta_{{z_L}_1},\ t_{{x_L}_1},\ t_{{y_L}_1},\ t_{{z_L}_1},\ ...,\ \theta_{{x_L}_M},\ \theta_{{y_L}_M},\ \theta_{{z_L}_M},\ t_{{x_L}_M},\ t_{{y_L}_M},\ t_{{z_L}_M}}^{6M},\overbrace{\theta_{x_s},\ \theta_{y_s},\ \theta_{z_s},\ t_{x_s},\ t_{y_s},\ t_{z_s}}^6)" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="1495" height="44"></p>
<p>Which results in 22+6M total parameters.</p>
<p>To compute the Jacobian, we start off with the residuals:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b92b93da6693754e24b19605ed100886_l3.png" class="ql-img-inline-formula " alt=" res_{x_L} = x_L^d(\vec{p})-x_L^m " title="Rendered by QuickLaTeX.com" style="vertical-align: -5px;" width="153" height="20"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-3ceae21a181095a143f336d4dcc3463c_l3.png" class="ql-img-inline-formula " alt=" res_{y_L} = y_L^d(\vec{p})-y_L^m " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="150" height="21"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-78135e92145dd544316c443fe0741009_l3.png" class="ql-img-inline-formula " alt=" res_{x_R} = x_R^d(\vec{p})-x_R^m " title="Rendered by QuickLaTeX.com" style="vertical-align: -5px;" width="155" height="20"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-d728c21d53d4255be7ad993a6b63e292_l3.png" class="ql-img-inline-formula " alt=" res_{y_R} = y_R^d(\vec{p})-y_R^m " title="Rendered by QuickLaTeX.com" style="vertical-align: -6px;" width="152" height="21"></p>
<p>Take the partial derivative:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-20f72a042dbd72050b98433b83701157_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{res_{x_L}}}{\partial{\vec{p}}} = \frac{\partial{x_L^d}}{\partial{\vec{p}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="96" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-c25b13abee44ce3c56601644b1e56c2d_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{res_{y_L}}}{\partial{\vec{p}}} = \frac{\partial{y_L^d}}{\partial{\vec{p}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="95" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-846906194e9cf4825e4b5d85abbf987a_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{res_{x_R}}}{\partial{\vec{p}}} = \frac{\partial{x_R^d}}{\partial{\vec{p}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="98" height="29"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-b55f544b9a2ba1ba7727f22f18883976_l3.png" class="ql-img-inline-formula " alt=" \frac{\partial{res_{y_R}}}{\partial{\vec{p}}} = \frac{\partial{y_R^d}}{\partial{\vec{p}}}" title="Rendered by QuickLaTeX.com" style="vertical-align: -9px;" width="97" height="29"></p>
<p>The Jacobian has the form:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-5e53ce011339b40ffb5155b6e40f4182_l3.png" class="ql-img-inline-formula " alt="\begin{bmatrix}J\end{bmatrix}_{ij} = \begin{bmatrix} \frac{\partial{res_i}}{\partial{\vec{p_j}}}\end{bmatrix}" title="Rendered by QuickLaTeX.com" style="vertical-align: -11px;" width="109" height="32"></p>
<p>Where:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6f9a23aefb270c02dfcfdd5ad30a2901_l3.png" class="ql-img-inline-formula " alt="  \newcommand\overmat[2]{% \makebox[0pt][l]{$\smash{\color{white}\overbrace{\phantom{% \begin{matrix}#2 \end{matrix}}}^{\text{\color{black}#1}}}$}#2} \newcommand\bovermat[2]{% \makebox[0pt][l]{$\smash{\overbrace{\phantom{% \begin{matrix}#2\end{matrix}}}^{\text{#1}}}$}#2} \newcommand\coolrightbrace[2]{% \left.\vphantom{\begin{matrix} #1 \end{matrix}}\right\}#2}  \begin{bmatrix} J \end{bmatrix} = \begin{blockarray}{cccccccc} &amp; \bovermat{22+6M}{\partial{\vec{a_L}} &amp; \partial{\vec{a_R}} &amp; \partial{\vec{m_{L_1}}} &amp; \partial{\vec{m_{L_2}}} &amp; \hdots &amp; \partial{\vec{m_{L_M}}} &amp; \partial{\vec{m_s}}} \\ \begin{block}{c[ccccccc@{\hspace*{5pt}}]} \partial{\vec{res_{L_1}}} &amp; X &amp; 0 &amp; X &amp; 0 &amp; \hdots &amp; 0 &amp; 0 \\ \partial{\vec{res_{R_1}}} &amp; 0 &amp; X &amp; X &amp; 0 &amp; \hdots &amp; 0 &amp; X \\ \partial{\vec{res_{L_2}}} &amp; X &amp; 0 &amp; 0 &amp; X &amp; \hdots &amp; 0 &amp; 0 \\ \partial{\vec{res_{R_2}}} &amp; 0 &amp; X &amp; 0 &amp; X &amp; \hdots &amp; 0 &amp; X \\ \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots &amp; \vdots \\ \partial{\vec{res_{L_M}}} &amp; X &amp; 0 &amp; 0 &amp; 0 &amp; \hdots &amp; X &amp; 0 \\ \partial{\vec{res_{R_M}}} &amp; 0 &amp; X &amp; 0 &amp; 0 &amp; \hdots &amp; X &amp; X \\ \end{block} \end{blockarray}% \begin{matrix} \\ \coolrightbrace{\begin{blockarray}{cccccccc} &amp; \bovermat{22+6M}{\partial{\vec{a_L}} &amp; \partial{\vec{a_R}} &amp; \partial{\vec{m_{L_1}}} &amp; \partial{\vec{m_{L_2}}} &amp; \hdots &amp; \partial{\vec{m_{L_M}}} &amp; \partial{\vec{m_s}}} \\ \begin{block}{c[ccccccc@{\hspace*{5pt}}]} \partial{\vec{res_{L_1}}} &amp; X &amp; 0 &amp; X &amp; 0 &amp; \hdots &amp; 0 &amp; 0 \\ \partial{\vec{res_{R_1}}} &amp; 0 &amp; X &amp; X &amp; 0 &amp; \hdots &amp; 0 &amp; X \\ \partial{\vec{res_{L_2}}} &amp; X &amp; 0 &amp; 0 &amp; X &amp; \hdots &amp; 0 &amp; 0 \\ \partial{\vec{res_{R_2}}} &amp; 0 &amp; X &amp; 0 &amp; X &amp; \hdots &amp; 0 &amp; X \\ \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots &amp; \vdots \\ \partial{\vec{res_{L_M}}} &amp; X &amp; 0 &amp; 0 &amp; 0 &amp; \hdots &amp; X &amp; 0 \\ \partial{\vec{res_{R_M}}} &amp; 0 &amp; X &amp; 0 &amp; 0 &amp; \hdots &amp; X &amp; X \\ \end{block} \end{blockarray}}{4NM} \\ \end{matrix} " title="Rendered by QuickLaTeX.com" style="vertical-align: -108px;" width="579" height="237"></p>
<p>Where, like before, the <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-996ff7036e644e89f8ac379fa58d0cf7_l3.png" class="ql-img-inline-formula " alt="X" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="16" height="12">‘s represent filled blocks and <img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8354ade9c79ec6a7ac658f2c3032c9df_l3.png" class="ql-img-inline-formula " alt="0" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="9" height="12">‘s are empty blocks.</p>
<p>To solve this, again, I’d recommend using the Levenberg-Marquardt 
method since it is not well-behaved under certain circumstances:</p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-6bbf1ffe2ac57dc3dde23f54dcbd8781_l3.png" class="ql-img-inline-formula " alt=" \Delta\vec{p} = -(\begin{bmatrix}J\end{bmatrix}^T \begin{bmatrix} J \end{bmatrix} + \lambda\begin{bmatrix}I\end{bmatrix})^{-1}\begin{bmatrix}J\end{bmatrix}^T\vec{res}" title="Rendered by QuickLaTeX.com" style="vertical-align: -7px;" width="286" height="26"></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-e6916618f15b19351fc60189141cba8f_l3.png" class="ql-img-inline-formula " alt="\vec{p_{new}} = \vec{p_{old}} + \Delta\vec{p}" title="Rendered by QuickLaTeX.com" style="vertical-align: -4px;" width="136" height="17"></p>
<p>Until some convergence condition.</p>
<p>Some things:</p>
<ul class="ili-indent">
<li><img decoding="async" loading="lazy" src="Camera-Calibration-Theory-justinblaber.org_files/quicklatex.com-8c37d2f1acb1d49f3e5e655797880475_l3.png" class="ql-img-inline-formula " alt="\lambda" title="Rendered by QuickLaTeX.com" style="vertical-align: 0px;" width="10" height="12"> is set and used as described in the single camera calibration section.</li>
<li>If there is only a single calibration board image, the principle 
point is again removed from the optimization similarly to the single 
camera calibration section.</li>
</ul>
<p>Now, we can perform camera calibration for stereo cameras using a checkerboard calibration target.</p>
<h2>Multi-Camera</h2>
<p>Coming soon…</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt="" src="Camera-Calibration-Theory-justinblaber.org_files/a4b96f057ac5e053a8b31163e0715653_002.jpeg" srcset="Camera-Calibration-Theory-justinblaber.org_files/a4b96f057ac5e053a8b31163e0715653.jpeg 2x" class="avatar avatar-49 photo" loading="lazy" decoding="async" width="49" height="49"><span class="screen-reader-text">Author </span> <a class="url fn n" href="http://justinblaber.org/author/admin/">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="http://justinblaber.org/camera-calibration-theory/" rel="bookmark"><time class="entry-date published" datetime="2018-06-03T22:18:11+00:00">June 3, 2018</time><time class="updated" datetime="2019-06-14T15:26:49+00:00">June 14, 2019</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="http://justinblaber.org/category/computer-vision/" rel="category tag">Computer Vision</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-938 -->

<div id="comments" class="comments-area">

	
	
		<div id="respond" class="comment-respond">
		<h2 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://justinblaber.org/camera-calibration-theory/#respond" style="display:none;">Cancel reply</a></small></h2><form action="http://justinblaber.org/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate=""><p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> <span class="required-field-message">Required fields are marked <span class="required">*</span></span></p><p class="comment-form-comment"><label for="comment">Comment <span class="required">*</span></label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required=""></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" size="30" maxlength="245" autocomplete="name" required=""></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" size="30" maxlength="100" aria-describedby="email-notes" autocomplete="email" required=""></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" size="30" maxlength="200" autocomplete="url"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="938" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none !important;"><label>Δ<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="1680751427410"><script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p></form>	</div><!-- #respond -->
	
</div><!-- .comments-area -->

	<nav class="navigation post-navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="http://justinblaber.org/camera-calibration-application/" rel="prev"><span class="meta-nav" aria-hidden="true">Previous</span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">Multiple Camera Calibration</span></a></div><div class="nav-next"><a href="http://justinblaber.org/t1-intensity-normalization/" rel="next"><span class="meta-nav" aria-hidden="true">Next</span> <span class="screen-reader-text">Next post:</span> <span class="post-title">T1 intensity normalization with FreeSurfer</span></a></div></div>
	</nav>
	</main><!-- .site-main -->

	
</div><!-- .content-area -->


	<aside id="secondary" class="sidebar widget-area" role="complementary">
		<section id="search-2" class="widget widget_search">
<form role="search" method="get" class="search-form" action="http://justinblaber.org/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search …" name="s">
	</label>
	<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</section>
		<section id="recent-posts-2" class="widget widget_recent_entries">
		<h2 class="widget-title">Recent Posts</h2>
		<ul>
											<li>
					<a href="http://justinblaber.org/how-to-control-a-power-outlet-with-a-raspberry-pi/">How to control a power outlet with a raspberry pi</a>
									</li>
											<li>
					<a href="http://justinblaber.org/ellipse-detection-localization/">Ellipse Detection/Localization</a>
									</li>
											<li>
					<a href="http://justinblaber.org/checker-detection-localization/">Checker Detection/Localization</a>
									</li>
											<li>
					<a href="http://justinblaber.org/b0-to-t1-atlas-coregistration/">b0 to T1 atlas coregistration with FSL and ANTS</a>
									</li>
											<li>
					<a href="http://justinblaber.org/t1-intensity-normalization/">T1 intensity normalization with FreeSurfer</a>
									</li>
					</ul>

		</section><section id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widget-title">Recent Comments</h2><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">E. Riley Blocker</span> on <a href="http://justinblaber.org/acquiring-stereo-images-with-spinnaker-api-hardware-trigger/#comment-36609">Acquiring Synchronized Multiple Camera Images with Spinnaker Python API + Hardware Trigger</a></li><li class="recentcomments"><span class="comment-author-link">Justin</span> on <a href="http://justinblaber.org/b0-to-t1-atlas-coregistration/#comment-36550">b0 to T1 atlas coregistration with FSL and ANTS</a></li><li class="recentcomments"><span class="comment-author-link">Justin</span> on <a href="http://justinblaber.org/b0-to-t1-atlas-coregistration/#comment-36549">b0 to T1 atlas coregistration with FSL and ANTS</a></li><li class="recentcomments"><span class="comment-author-link">Justin</span> on <a href="http://justinblaber.org/bedpostx/#comment-36548">bedpostx with Docker and Singularity!</a></li><li class="recentcomments"><span class="comment-author-link">Justin</span> on <a href="http://justinblaber.org/camera-calibration-application/#comment-36547">Multiple Camera Calibration</a></li></ul></section><section id="archives-2" class="widget widget_archive"><h2 class="widget-title">Archives</h2>
			<ul>
					<li><a href="http://justinblaber.org/2021/09/">September 2021</a></li>
	<li><a href="http://justinblaber.org/2019/06/">June 2019</a></li>
	<li><a href="http://justinblaber.org/2018/07/">July 2018</a></li>
	<li><a href="http://justinblaber.org/2018/06/">June 2018</a></li>
	<li><a href="http://justinblaber.org/2018/05/">May 2018</a></li>
	<li><a href="http://justinblaber.org/2018/03/">March 2018</a></li>
	<li><a href="http://justinblaber.org/2017/03/">March 2017</a></li>
	<li><a href="http://justinblaber.org/2017/02/">February 2017</a></li>
			</ul>

			</section><section id="categories-2" class="widget widget_categories"><h2 class="widget-title">Categories</h2>
			<ul>
					<li class="cat-item cat-item-4"><a href="http://justinblaber.org/category/computer-vision/">Computer Vision</a>
</li>
	<li class="cat-item cat-item-2"><a href="http://justinblaber.org/category/medical_image_processing/">Medical Image Processing</a>
</li>
	<li class="cat-item cat-item-16"><a href="http://justinblaber.org/category/other-stuff/">Other Stuff</a>
</li>
			</ul>

			</section>	</aside><!-- .sidebar .widget-area -->

		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
							<nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu">
					<div class="menu-top-menu-container"><ul id="menu-top-menu-1" class="primary-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-19"><a href="http://justinblaber.org/">Home</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-25"><a href="http://justinblaber.org/category/computer-vision/">Computer Vision</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-22"><a href="http://justinblaber.org/category/medical_image_processing/">Medical Image Processing</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2697"><a href="http://justinblaber.org/category/other-stuff/">Other Stuff</a></li>
</ul></div>				</nav><!-- .main-navigation -->
			
			
			<div class="site-info">
								<span class="site-title"><a href="http://justinblaber.org/" rel="home">justinblaber.org</a></span>
								<a href="https://wordpress.org/" class="imprint">
					Proudly powered by WordPress				</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

<script src="Camera-Calibration-Theory-justinblaber.org_files/skip-link-focus-fix.js" id="twentysixteen-skip-link-focus-fix-js"></script>
<script src="Camera-Calibration-Theory-justinblaber.org_files/comment-reply.min.js" id="comment-reply-js"></script>
<script id="twentysixteen-script-js-extra">
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
</script>
<script src="Camera-Calibration-Theory-justinblaber.org_files/functions.js" id="twentysixteen-script-js"></script>



<iframe src="Camera-Calibration-Theory-justinblaber.org_files/console.html" id="vimvixen-console-frame" class="vimvixen-console-frame"></iframe></body></html>
<!-- Page generated by LiteSpeed Cache 3.6.2 on 2023-04-06 03:23:16 -->